/*! cornerstone-core - 0.0.0-semantically-released - 2023-11-29 | (c) 2016 Chris Hafey | https://github.com/cornerstonejs/cornerstone */
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("cornerstone-core",[],t):"object"==typeof exports?exports["cornerstone-core"]=t():e.cornerstone=t()}(window,function(){return r=[function(V,e,t){"use strict";function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function U(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,function(e){e=function(e,t){if("object"!==o(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!==o(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"===o(e)?e:String(e)}(n.key),n)}}t.r(e),t.d(e,"drawImage",function(){return n}),t.d(e,"generateLut",function(){return Pt}),t.d(e,"getDefaultViewport",function(){return s}),t.d(e,"setDefaultViewport",function(){return q}),t.d(e,"requestAnimationFrame",function(){return Yt}),t.d(e,"storedPixelDataToCanvasImageData",function(){return Ye}),t.d(e,"storedColorPixelDataToCanvasImageData",function(){return Mt}),t.d(e,"storedPixelDataToCanvasImageDataColorLUT",function(){return kt}),t.d(e,"storedPixelDataToCanvasImageDataPseudocolorLUT",function(){return Vt}),t.d(e,"internal",function(){return n5}),t.d(e,"renderLabelMapImage",function(){return Ft}),t.d(e,"renderPseudoColorImage",function(){return Bt}),t.d(e,"renderColorImage",function(){return O}),t.d(e,"renderGrayscaleImage",function(){return At}),t.d(e,"renderWebImage",function(){return d5}),t.d(e,"renderToCanvas",function(){return u5}),t.d(e,"canvasToPixel",function(){return Ge}),t.d(e,"disable",function(){return Fe}),t.d(e,"displayImage",function(){return ze}),t.d(e,"draw",function(){return qe}),t.d(e,"drawInvalidated",function(){return je}),t.d(e,"enable",function(){return $t}),t.d(e,"getElementData",function(){return me}),t.d(e,"removeElementData",function(){return ce}),t.d(e,"getEnabledElement",function(){return c}),t.d(e,"addEnabledElement",function(){return B}),t.d(e,"getEnabledElementsByImageId",function(){return k}),t.d(e,"getEnabledElements",function(){return G}),t.d(e,"addLayer",function(){return Y}),t.d(e,"removeLayer",function(){return K}),t.d(e,"getLayer",function(){return Z}),t.d(e,"getLayers",function(){return $}),t.d(e,"getVisibleLayers",function(){return J}),t.d(e,"setActiveLayer",function(){return u}),t.d(e,"getActiveLayer",function(){return h}),t.d(e,"purgeLayers",function(){return ee}),t.d(e,"setLayerImage",function(){return Q}),t.d(e,"fitToWindow",function(){return We}),t.d(e,"getDefaultViewportForImage",function(){return Jt}),t.d(e,"getDisplayedArea",function(){return f}),t.d(e,"getImage",function(){return Qt}),t.d(e,"getPixels",function(){return t5}),t.d(e,"getStoredPixels",function(){return e5}),t.d(e,"getViewport",function(){return r5}),t.d(e,"loadImage",function(){return Ie}),t.d(e,"loadAndCacheImage",function(){return Te}),t.d(e,"registerImageLoader",function(){return Ce}),t.d(e,"registerUnknownImageLoader",function(){return Le}),t.d(e,"invalidate",function(){return o5}),t.d(e,"invalidateImageId",function(){return a5}),t.d(e,"pageToPixel",function(){return l5}),t.d(e,"pixelToCanvas",function(){return s5}),t.d(e,"reset",function(){return c5}),t.d(e,"resize",function(){return He}),t.d(e,"setToPixelCoordinateSystem",function(){return T}),t.d(e,"setViewport",function(){return f5}),t.d(e,"updateImage",function(){return m}),t.d(e,"pixelDataToFalseColorData",function(){return le}),t.d(e,"rendering",function(){return m5}),t.d(e,"imageCache",function(){return ye}),t.d(e,"metaData",function(){return i5}),t.d(e,"webGL",function(){return A}),t.d(e,"colors",function(){return w}),t.d(e,"convertImageToFalseColorImage",function(){return ue}),t.d(e,"convertToFalseColorImage",function(){return de}),t.d(e,"restoreImage",function(){return se}),t.d(e,"EVENTS",function(){return d}),t.d(e,"events",function(){return a}),t.d(e,"triggerEvent",function(){return g}),t.d(e,"imageLoadPoolManager",function(){return Me}),t.d(e,"imageRetrievalPoolManager",function(){return Oe}),t.d(e,"RequestPoolManager",function(){return _e});var d={NEW_IMAGE:"cornerstonenewimage",INVALIDATED:"cornerstoneinvalidated",PRE_RENDER:"cornerstoneprerender",IMAGE_CACHE_MAXIMUM_SIZE_CHANGED:"cornerstoneimagecachemaximumsizechanged",IMAGE_CACHE_PROMISE_REMOVED:"cornerstoneimagecachepromiseremoved",IMAGE_CACHE_FULL:"cornerstoneimagecachefull",IMAGE_CACHE_CHANGED:"cornerstoneimagecachechanged",WEBGL_TEXTURE_REMOVED:"cornerstonewebgltextureremoved",WEBGL_TEXTURE_CACHE_FULL:"cornerstonewebgltexturecachefull",IMAGE_LOADED:"cornerstoneimageloaded",IMAGE_LOAD_PROGRESS:"cornerstoneimageloadprogress",IMAGE_LOAD_FAILED:"cornerstoneimageloadfailed",ELEMENT_RESIZED:"cornerstoneelementresized",IMAGE_RENDERED:"cornerstoneimagerendered",LAYER_ADDED:"cornerstonelayeradded",LAYER_REMOVED:"cornerstonelayerremoved",ACTIVE_LAYER_CHANGED:"cornerstoneactivelayerchanged",ELEMENT_DISABLED:"cornerstoneelementdisabled",ELEMENT_ENABLED:"cornerstoneelementenabled"},a=new(function(){function e(){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");this.listeners={},this.namespaces={}}var t,r,n;return t=e,(r=[{key:"addEventNamespaceListener",value:function(e,t){e.indexOf(".")<=0||(this.namespaces[e]=t,this.addEventListener(e.split(".")[0],t))}},{key:"removeEventNamespaceListener",value:function(e){e.indexOf(".")<=0||!this.namespaces[e]||(this.removeEventListener(e.split(".")[0],this.namespaces[e]),delete this.namespaces[e])}},{key:"addEventListener",value:function(e,t){0<e.indexOf(".")?this.addEventNamespaceListener(e,t):(e in this.listeners||(this.listeners[e]=[]),this.listeners[e].push(t))}},{key:"removeEventListener",value:function(e,t){if(0<e.indexOf("."))this.removeEventNamespaceListener(e);else if(e in this.listeners)for(var r=this.listeners[e],n=0,o=r.length;n<o;n++)if(r[n]===t)return void r.splice(n,1)}},{key:"dispatchEvent",value:function(e){if(!(e.type in this.listeners))return!0;for(var t=this.listeners[e.type].slice(),r=0,n=t.length;r<n;r++)t[r].call(this,e);return!e.defaultPrevented}}])&&U(t.prototype,r),n&&U(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}()),i=[];function c(e){if(void 0===e)throw new Error("getEnabledElement: parameter element must not be undefined");for(var t=0;t<i.length;t++)if(i[t].element===e)return i[t];throw new Error("element not enabled")}function B(e){if(void 0===e)throw new Error("getEnabledElement: enabledElement element must not be undefined");i.push(e)}function k(t){var r=[];return i.forEach(function(e){e.image&&e.image.imageId===t&&r.push(e)}),r}function G(){return i}function r(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}var F=function(){return"".concat(r()+r(),"-").concat(r(),"-").concat(r(),"-").concat(r(),"-").concat(r()).concat(r()).concat(r())},z={viewport:{}},q=function(e){z.viewport=e||{}};function l(e,t){if(null==e)throw new Error(t)}function j(e,t){var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null,r=(l(e,"getImageScale: parameter windowSize must not be undefined"),l(t,"getImageScale: parameter image must not be undefined"),W(t,r)),n=t.rowPixelSpacing||1,t=t.columnPixelSpacing||1,o=1,a=1,n=(n<t?a=t/n:o=n/t,e.height/r.height/o),t=e.width/r.width/a;return{verticalScale:n,horizontalScale:t,scaleFactor:Math.min(t,n)}}var W=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null;return l(e,"getImageSize: parameter image must not be undefined"),l(e.width,"getImageSize: parameter image must have width"),l(e.height,"getImageSize: parameter image must have height"),null!=(t=t)&&0!==t&&180!==t?{height:e.width,width:e.height}:{width:e.width,height:e.height}},s=function(e,t){if(void 0===e)throw new Error("getDefaultViewport: parameter canvas must not be undefined");return void 0===t?Object.assign({},{scale:1,translation:{x:0,y:0},voi:{windowWidth:void 0,windowCenter:void 0},invert:!1,pixelReplication:!1,rotation:0,hflip:!1,vflip:!1,modalityLUT:void 0,voiLUT:void 0,colormap:void 0,labelmap:!1,displayedArea:void 0},z.viewport):{scale:j(e,t,0).scaleFactor,translation:{x:0,y:0},voi:{windowWidth:t.windowWidth,windowCenter:t.windowCenter},invert:t.invert,pixelReplication:!1,rotation:0,hflip:!1,vflip:!1,modalityLUT:t.modalityLUT,voiLUT:t.voiLUT,colormap:t.colormap,labelmap:Boolean(t.labelmap),displayedArea:void 0}},f=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null;if(t&&t.displayedArea)return t.displayedArea;if(void 0===e)throw new Error("getDisplayedArea: parameter image must not be undefined");return{tlhc:{x:1,y:1},brhc:{x:e.columns,y:e.rows},rowPixelSpacing:void 0===e.rowPixelSpacing?1:e.rowPixelSpacing,columnPixelSpacing:void 0===e.columnPixelSpacing?1:e.columnPixelSpacing,presentationSizeMode:"NONE"}},n=function(e){var t=1<arguments.length&&void 0!==arguments[1]&&arguments[1];e.needsRedraw=!0,t&&(e.invalid=!0)},m=function(e){var t=1<arguments.length&&void 0!==arguments[1]&&arguments[1],e=c(e);n(e,t)};function g(e,t){var r,n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;return"function"==typeof window.CustomEvent?r=new CustomEvent(t,{detail:n,cancelable:!0}):(r=document.createEvent("CustomEvent")).initCustomEvent(t,!0,!0,n),e.dispatchEvent(r)}function H(e,t,r){g(t.element,e,{viewport:t.viewport,element:t.element,image:t.image,enabledElement:t,layerId:r})}function X(e,t){if(e.layerId===t.layerId)throw new Error("rescaleImage: both arguments represent the same layer");var r,n,o=e.image,a=t.image;o.imageId&&a.imageId&&(n=f(a,t.viewport),r=f(o,e.viewport),n=n.columnPixelSpacing*a.width/(r.columnPixelSpacing*o.width),a=t.viewport.scale/e.viewport.scale*n,t.viewport.scale=e.viewport.scale*a)}function Y(e,t,r){var n=F(),o=c(e),a=o.layers,i=(t&&(i=s(o.canvas,t),r)&&r.viewport&&(i=Object.assign(i,r.viewport)),!1!==o.syncViewports&&(o.syncViewports=!0),{image:t,layerId:n,viewport:i,options:r||{},renderingTools:{}});return a.length&&t&&X(a[0],i),a.push(i),H(d.LAYER_ADDED,o,n),1===a.length&&t&&u(e,n),n}function K(e,t){var r=c(e),n=r.layers,o=r.layers.findIndex(function(e){return e.layerId===t});-1!==o&&(n.splice(o,1),t===r.activeLayerId&&n.length&&u(e,n[0].layerId),H(d.LAYER_REMOVED,r,t))}function Z(e,t){return c(e).layers.find(function(e){return e.layerId===t})}function $(e){return c(e).layers}function J(e){return c(e).layers.filter(function(e){return e.options&&!1!==e.options.visible&&0!==e.options.opacity})}function u(e,t){var r=c(e);if(r.activeLayerId!==t){var n=r.layers.findIndex(function(e){return e.layerId===t});if(-1===n)throw new Error("setActiveLayer: layer not found in layers array");n=r.layers[n];if(!n.image)throw new Error("setActiveLayer: layer with undefined image cannot be set as active.");r.activeLayerId=t,r.image=n.image,r.viewport=n.viewport,m(e),H(d.ACTIVE_LAYER_CHANGED,r,t)}}function Q(e,t,r){var n=c(e),o=n.layers[0],e=r?Z(e,r):h(e);if(!e)throw new Error("setLayerImage: Layer not found");(e.image=t)?e.viewport||(n=s(n.canvas,t),e.options&&e.options.viewport&&(e.viewport=Object.assign(n,e.options.viewport)),o.layerId!==r&&X(o,e)):e.viewport=void 0}function h(e){var t=c(e);return t.layers.find(function(e){return e.layerId===t.activeLayerId})}function ee(e){e=c(e);e.layers=[],delete e.activeLayerId,delete e.lastSyncViewportsState}function v(e){return(v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function te(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,function(e){e=function(e,t){if("object"!==v(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!==v(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"===v(e)?e:String(e)}(n.key),n)}}var re=function(){function e(){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");this.NumberOfColors=256,this.Ramp="linear",this.TableRange=[0,255],this.HueRange=[0,.66667],this.SaturationRange=[1,1],this.ValueRange=[1,1],this.AlphaRange=[1,1],this.NaNColor=[128,0,0,255],this.BelowRangeColor=[0,0,0,255],this.UseBelowRangeColor=!0,this.AboveRangeColor=[255,255,255,255],this.UseAboveRangeColor=!0,this.InputRange=[0,255],this.Table=[]}var t,r,n;return t=e,(r=[{key:"setNumberOfTableValues",value:function(e){this.NumberOfColors=e}},{key:"setRamp",value:function(e){this.Ramp=e}},{key:"setTableRange",value:function(e,t){this.TableRange[0]=e,this.TableRange[1]=t}},{key:"setHueRange",value:function(e,t){this.HueRange[0]=e,this.HueRange[1]=t}},{key:"setSaturationRange",value:function(e,t){this.SaturationRange[0]=e,this.SaturationRange[1]=t}},{key:"setValueRange",value:function(e,t){this.ValueRange[0]=e,this.ValueRange[1]=t}},{key:"setRange",value:function(e,t){this.InputRange[0]=e,this.InputRange[1]=t}},{key:"setAlphaRange",value:function(e,t){this.AlphaRange[0]=e,this.AlphaRange[1]=t}},{key:"getColor",value:function(e){return this.mapValue(e)}},{key:"build",value:function(e){if(!(1<this.Table.length)||e){this.Table=[];var t,r,n,o,a=this.NumberOfColors-1;a?(t=(this.HueRange[1]-this.HueRange[0])/a,r=(this.SaturationRange[1]-this.SaturationRange[0])/a,n=(this.ValueRange[1]-this.ValueRange[0])/a,o=(this.AlphaRange[1]-this.AlphaRange[0])/a):t=r=n=o=0;for(var i=0;i<=a;i++){var l=this.HueRange[0]+i*t,s=this.SaturationRange[0]+i*r,u=this.ValueRange[0]+i*n,d=this.AlphaRange[0]+i*o,m=function(e,t,r){if(1<e)throw new Error("HSVToRGB expects hue < 1");var n=[];if(0===t)n[0]=r,n[1]=r,n[2]=r;else{var o=Math.floor(6*e),e=6*e-o,a=r*(1-t),i=r*(1-t*e),l=r*(1-t*(1-e));switch(o){case 0:case 6:n[0]=r,n[1]=l,n[2]=a;break;case 1:n[0]=i,n[1]=r,n[2]=a;break;case 2:n[0]=a,n[1]=r,n[2]=l;break;case 3:n[0]=a,n[1]=i,n[2]=r;break;case 4:n[0]=l,n[1]=a,n[2]=r;break;case 5:n[0]=r,n[1]=a,n[2]=i}}return n}(l,s,u),c=[];switch(this.Ramp){case"scurve":c[0]=Math.floor(127.5*(1+Math.cos((1-m[0])*Math.PI))),c[1]=Math.floor(127.5*(1+Math.cos((1-m[1])*Math.PI))),c[2]=Math.floor(127.5*(1+Math.cos((1-m[2])*Math.PI))),c[3]=Math.floor(255*d);break;case"linear":c[0]=Math.floor(255*m[0]+.5),c[1]=Math.floor(255*m[1]+.5),c[2]=Math.floor(255*m[2]+.5),c[3]=Math.floor(255*d+.5);break;case"sqrt":c[0]=Math.floor(255*Math.sqrt(m[0])+.5),c[1]=Math.floor(255*Math.sqrt(m[1])+.5),c[2]=Math.floor(255*Math.sqrt(m[2])+.5),c[3]=Math.floor(255*Math.sqrt(d)+.5);break;default:throw new Error("Invalid Ramp value (".concat(this.Ramp,")"))}this.Table.push(c)}this.buildSpecialColors()}}},{key:"buildSpecialColors",value:function(){var e=this.NumberOfColors,t=e+0,r=e+1,n=e+2;this.UseBelowRangeColor||0===e?this.Table[t]=this.BelowRangeColor:this.Table[t]=this.Table[0],this.UseAboveRangeColor||0===e?this.Table[r]=this.AboveRangeColor:this.Table[r]=this.Table[e-1],this.Table[n]=this.NaNColor}},{key:"mapValue",value:function(e){var t=this.getIndex(e);if(t<0)return this.NaNColor;if(0===t){if(this.UseBelowRangeColor&&e<this.TableRange[0])return this.BelowRangeColor}else if(t===this.NumberOfColors-1&&this.UseAboveRangeColor&&e>this.TableRange[1])return this.AboveRangeColor;return this.Table[t]}},{key:"getIndex",value:function(e){var t={Range:[]};return t.MaxIndex=this.NumberOfColors-1,t.Shift=-this.TableRange[0],this.TableRange[1]<=this.TableRange[0]?t.Scale=Number.MAX_VALUE:t.Scale=t.MaxIndex/(this.TableRange[1]-this.TableRange[0]),t.Range[0]=this.TableRange[0],t.Range[1]=this.TableRange[1],isNaN(e)?-1:(e=(e=e)<(t=t).Range[0]?t.MaxIndex+0+1.5:e>t.Range[1]?t.MaxIndex+1+1.5:(e+t.Shift)*t.Scale,(t=Math.floor(e))===this.NumberOfColors+0?t=0:t===this.NumberOfColors+1&&(t=this.NumberOfColors-1),t)}},{key:"setTableValue",value:function(e,t){if(5===arguments.length&&(t=Array.prototype.slice.call(arguments,1)),e<0)throw new Error("Can't set the table value for negative index (".concat(e,")"));e>=this.NumberOfColors&&new Error("Index ".concat(e," is greater than the number of colors ").concat(this.NumberOfColors)),this.Table[e]=t,0!==e&&e!==this.NumberOfColors-1||this.buildSpecialColors()}}])&&te(t.prototype,r),n&&te(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}(),ne=[0,0,0,0],p={hotIron:{name:"Hot Iron",numOfColors:256,colors:[[0,0,0,255],[2,0,0,255],[4,0,0,255],[6,0,0,255],[8,0,0,255],[10,0,0,255],[12,0,0,255],[14,0,0,255],[16,0,0,255],[18,0,0,255],[20,0,0,255],[22,0,0,255],[24,0,0,255],[26,0,0,255],[28,0,0,255],[30,0,0,255],[32,0,0,255],[34,0,0,255],[36,0,0,255],[38,0,0,255],[40,0,0,255],[42,0,0,255],[44,0,0,255],[46,0,0,255],[48,0,0,255],[50,0,0,255],[52,0,0,255],[54,0,0,255],[56,0,0,255],[58,0,0,255],[60,0,0,255],[62,0,0,255],[64,0,0,255],[66,0,0,255],[68,0,0,255],[70,0,0,255],[72,0,0,255],[74,0,0,255],[76,0,0,255],[78,0,0,255],[80,0,0,255],[82,0,0,255],[84,0,0,255],[86,0,0,255],[88,0,0,255],[90,0,0,255],[92,0,0,255],[94,0,0,255],[96,0,0,255],[98,0,0,255],[100,0,0,255],[102,0,0,255],[104,0,0,255],[106,0,0,255],[108,0,0,255],[110,0,0,255],[112,0,0,255],[114,0,0,255],[116,0,0,255],[118,0,0,255],[120,0,0,255],[122,0,0,255],[124,0,0,255],[126,0,0,255],[128,0,0,255],[130,0,0,255],[132,0,0,255],[134,0,0,255],[136,0,0,255],[138,0,0,255],[140,0,0,255],[142,0,0,255],[144,0,0,255],[146,0,0,255],[148,0,0,255],[150,0,0,255],[152,0,0,255],[154,0,0,255],[156,0,0,255],[158,0,0,255],[160,0,0,255],[162,0,0,255],[164,0,0,255],[166,0,0,255],[168,0,0,255],[170,0,0,255],[172,0,0,255],[174,0,0,255],[176,0,0,255],[178,0,0,255],[180,0,0,255],[182,0,0,255],[184,0,0,255],[186,0,0,255],[188,0,0,255],[190,0,0,255],[192,0,0,255],[194,0,0,255],[196,0,0,255],[198,0,0,255],[200,0,0,255],[202,0,0,255],[204,0,0,255],[206,0,0,255],[208,0,0,255],[210,0,0,255],[212,0,0,255],[214,0,0,255],[216,0,0,255],[218,0,0,255],[220,0,0,255],[222,0,0,255],[224,0,0,255],[226,0,0,255],[228,0,0,255],[230,0,0,255],[232,0,0,255],[234,0,0,255],[236,0,0,255],[238,0,0,255],[240,0,0,255],[242,0,0,255],[244,0,0,255],[246,0,0,255],[248,0,0,255],[250,0,0,255],[252,0,0,255],[254,0,0,255],[255,0,0,255],[255,2,0,255],[255,4,0,255],[255,6,0,255],[255,8,0,255],[255,10,0,255],[255,12,0,255],[255,14,0,255],[255,16,0,255],[255,18,0,255],[255,20,0,255],[255,22,0,255],[255,24,0,255],[255,26,0,255],[255,28,0,255],[255,30,0,255],[255,32,0,255],[255,34,0,255],[255,36,0,255],[255,38,0,255],[255,40,0,255],[255,42,0,255],[255,44,0,255],[255,46,0,255],[255,48,0,255],[255,50,0,255],[255,52,0,255],[255,54,0,255],[255,56,0,255],[255,58,0,255],[255,60,0,255],[255,62,0,255],[255,64,0,255],[255,66,0,255],[255,68,0,255],[255,70,0,255],[255,72,0,255],[255,74,0,255],[255,76,0,255],[255,78,0,255],[255,80,0,255],[255,82,0,255],[255,84,0,255],[255,86,0,255],[255,88,0,255],[255,90,0,255],[255,92,0,255],[255,94,0,255],[255,96,0,255],[255,98,0,255],[255,100,0,255],[255,102,0,255],[255,104,0,255],[255,106,0,255],[255,108,0,255],[255,110,0,255],[255,112,0,255],[255,114,0,255],[255,116,0,255],[255,118,0,255],[255,120,0,255],[255,122,0,255],[255,124,0,255],[255,126,0,255],[255,128,4,255],[255,130,8,255],[255,132,12,255],[255,134,16,255],[255,136,20,255],[255,138,24,255],[255,140,28,255],[255,142,32,255],[255,144,36,255],[255,146,40,255],[255,148,44,255],[255,150,48,255],[255,152,52,255],[255,154,56,255],[255,156,60,255],[255,158,64,255],[255,160,68,255],[255,162,72,255],[255,164,76,255],[255,166,80,255],[255,168,84,255],[255,170,88,255],[255,172,92,255],[255,174,96,255],[255,176,100,255],[255,178,104,255],[255,180,108,255],[255,182,112,255],[255,184,116,255],[255,186,120,255],[255,188,124,255],[255,190,128,255],[255,192,132,255],[255,194,136,255],[255,196,140,255],[255,198,144,255],[255,200,148,255],[255,202,152,255],[255,204,156,255],[255,206,160,255],[255,208,164,255],[255,210,168,255],[255,212,172,255],[255,214,176,255],[255,216,180,255],[255,218,184,255],[255,220,188,255],[255,222,192,255],[255,224,196,255],[255,226,200,255],[255,228,204,255],[255,230,208,255],[255,232,212,255],[255,234,216,255],[255,236,220,255],[255,238,224,255],[255,240,228,255],[255,242,232,255],[255,244,236,255],[255,246,240,255],[255,248,244,255],[255,250,248,255],[255,252,252,255],[255,255,255,255]]},pet:{name:"PET",numColors:256,colors:[[0,0,0,255],[0,2,1,255],[0,4,3,255],[0,6,5,255],[0,8,7,255],[0,10,9,255],[0,12,11,255],[0,14,13,255],[0,16,15,255],[0,18,17,255],[0,20,19,255],[0,22,21,255],[0,24,23,255],[0,26,25,255],[0,28,27,255],[0,30,29,255],[0,32,31,255],[0,34,33,255],[0,36,35,255],[0,38,37,255],[0,40,39,255],[0,42,41,255],[0,44,43,255],[0,46,45,255],[0,48,47,255],[0,50,49,255],[0,52,51,255],[0,54,53,255],[0,56,55,255],[0,58,57,255],[0,60,59,255],[0,62,61,255],[0,65,63,255],[0,67,65,255],[0,69,67,255],[0,71,69,255],[0,73,71,255],[0,75,73,255],[0,77,75,255],[0,79,77,255],[0,81,79,255],[0,83,81,255],[0,85,83,255],[0,87,85,255],[0,89,87,255],[0,91,89,255],[0,93,91,255],[0,95,93,255],[0,97,95,255],[0,99,97,255],[0,101,99,255],[0,103,101,255],[0,105,103,255],[0,107,105,255],[0,109,107,255],[0,111,109,255],[0,113,111,255],[0,115,113,255],[0,117,115,255],[0,119,117,255],[0,121,119,255],[0,123,121,255],[0,125,123,255],[0,128,125,255],[1,126,127,255],[3,124,129,255],[5,122,131,255],[7,120,133,255],[9,118,135,255],[11,116,137,255],[13,114,139,255],[15,112,141,255],[17,110,143,255],[19,108,145,255],[21,106,147,255],[23,104,149,255],[25,102,151,255],[27,100,153,255],[29,98,155,255],[31,96,157,255],[33,94,159,255],[35,92,161,255],[37,90,163,255],[39,88,165,255],[41,86,167,255],[43,84,169,255],[45,82,171,255],[47,80,173,255],[49,78,175,255],[51,76,177,255],[53,74,179,255],[55,72,181,255],[57,70,183,255],[59,68,185,255],[61,66,187,255],[63,64,189,255],[65,63,191,255],[67,61,193,255],[69,59,195,255],[71,57,197,255],[73,55,199,255],[75,53,201,255],[77,51,203,255],[79,49,205,255],[81,47,207,255],[83,45,209,255],[85,43,211,255],[86,41,213,255],[88,39,215,255],[90,37,217,255],[92,35,219,255],[94,33,221,255],[96,31,223,255],[98,29,225,255],[100,27,227,255],[102,25,229,255],[104,23,231,255],[106,21,233,255],[108,19,235,255],[110,17,237,255],[112,15,239,255],[114,13,241,255],[116,11,243,255],[118,9,245,255],[120,7,247,255],[122,5,249,255],[124,3,251,255],[126,1,253,255],[128,0,255,255],[130,2,252,255],[132,4,248,255],[134,6,244,255],[136,8,240,255],[138,10,236,255],[140,12,232,255],[142,14,228,255],[144,16,224,255],[146,18,220,255],[148,20,216,255],[150,22,212,255],[152,24,208,255],[154,26,204,255],[156,28,200,255],[158,30,196,255],[160,32,192,255],[162,34,188,255],[164,36,184,255],[166,38,180,255],[168,40,176,255],[170,42,172,255],[171,44,168,255],[173,46,164,255],[175,48,160,255],[177,50,156,255],[179,52,152,255],[181,54,148,255],[183,56,144,255],[185,58,140,255],[187,60,136,255],[189,62,132,255],[191,64,128,255],[193,66,124,255],[195,68,120,255],[197,70,116,255],[199,72,112,255],[201,74,108,255],[203,76,104,255],[205,78,100,255],[207,80,96,255],[209,82,92,255],[211,84,88,255],[213,86,84,255],[215,88,80,255],[217,90,76,255],[219,92,72,255],[221,94,68,255],[223,96,64,255],[225,98,60,255],[227,100,56,255],[229,102,52,255],[231,104,48,255],[233,106,44,255],[235,108,40,255],[237,110,36,255],[239,112,32,255],[241,114,28,255],[243,116,24,255],[245,118,20,255],[247,120,16,255],[249,122,12,255],[251,124,8,255],[253,126,4,255],[255,128,0,255],[255,130,4,255],[255,132,8,255],[255,134,12,255],[255,136,16,255],[255,138,20,255],[255,140,24,255],[255,142,28,255],[255,144,32,255],[255,146,36,255],[255,148,40,255],[255,150,44,255],[255,152,48,255],[255,154,52,255],[255,156,56,255],[255,158,60,255],[255,160,64,255],[255,162,68,255],[255,164,72,255],[255,166,76,255],[255,168,80,255],[255,170,85,255],[255,172,89,255],[255,174,93,255],[255,176,97,255],[255,178,101,255],[255,180,105,255],[255,182,109,255],[255,184,113,255],[255,186,117,255],[255,188,121,255],[255,190,125,255],[255,192,129,255],[255,194,133,255],[255,196,137,255],[255,198,141,255],[255,200,145,255],[255,202,149,255],[255,204,153,255],[255,206,157,255],[255,208,161,255],[255,210,165,255],[255,212,170,255],[255,214,174,255],[255,216,178,255],[255,218,182,255],[255,220,186,255],[255,222,190,255],[255,224,194,255],[255,226,198,255],[255,228,202,255],[255,230,206,255],[255,232,210,255],[255,234,214,255],[255,236,218,255],[255,238,222,255],[255,240,226,255],[255,242,230,255],[255,244,234,255],[255,246,238,255],[255,248,242,255],[255,250,246,255],[255,252,250,255],[255,255,255,255]]},hotMetalBlue:{name:"Hot Metal Blue",numColors:256,colors:[[0,0,0,255],[0,0,2,255],[0,0,4,255],[0,0,6,255],[0,0,8,255],[0,0,10,255],[0,0,12,255],[0,0,14,255],[0,0,16,255],[0,0,17,255],[0,0,19,255],[0,0,21,255],[0,0,23,255],[0,0,25,255],[0,0,27,255],[0,0,29,255],[0,0,31,255],[0,0,33,255],[0,0,35,255],[0,0,37,255],[0,0,39,255],[0,0,41,255],[0,0,43,255],[0,0,45,255],[0,0,47,255],[0,0,49,255],[0,0,51,255],[0,0,53,255],[0,0,55,255],[0,0,57,255],[0,0,59,255],[0,0,61,255],[0,0,63,255],[0,0,65,255],[0,0,67,255],[0,0,69,255],[0,0,71,255],[0,0,73,255],[0,0,75,255],[0,0,77,255],[0,0,79,255],[0,0,81,255],[0,0,83,255],[0,0,84,255],[0,0,86,255],[0,0,88,255],[0,0,90,255],[0,0,92,255],[0,0,94,255],[0,0,96,255],[0,0,98,255],[0,0,100,255],[0,0,102,255],[0,0,104,255],[0,0,106,255],[0,0,108,255],[0,0,110,255],[0,0,112,255],[0,0,114,255],[0,0,116,255],[0,0,117,255],[0,0,119,255],[0,0,121,255],[0,0,123,255],[0,0,125,255],[0,0,127,255],[0,0,129,255],[0,0,131,255],[0,0,133,255],[0,0,135,255],[0,0,137,255],[0,0,139,255],[0,0,141,255],[0,0,143,255],[0,0,145,255],[0,0,147,255],[0,0,149,255],[0,0,151,255],[0,0,153,255],[0,0,155,255],[0,0,157,255],[0,0,159,255],[0,0,161,255],[0,0,163,255],[0,0,165,255],[0,0,167,255],[3,0,169,255],[6,0,171,255],[9,0,173,255],[12,0,175,255],[15,0,177,255],[18,0,179,255],[21,0,181,255],[24,0,183,255],[26,0,184,255],[29,0,186,255],[32,0,188,255],[35,0,190,255],[38,0,192,255],[41,0,194,255],[44,0,196,255],[47,0,198,255],[50,0,200,255],[52,0,197,255],[55,0,194,255],[57,0,191,255],[59,0,188,255],[62,0,185,255],[64,0,182,255],[66,0,179,255],[69,0,176,255],[71,0,174,255],[74,0,171,255],[76,0,168,255],[78,0,165,255],[81,0,162,255],[83,0,159,255],[85,0,156,255],[88,0,153,255],[90,0,150,255],[93,2,144,255],[96,4,138,255],[99,6,132,255],[102,8,126,255],[105,9,121,255],[108,11,115,255],[111,13,109,255],[114,15,103,255],[116,17,97,255],[119,19,91,255],[122,21,85,255],[125,23,79,255],[128,24,74,255],[131,26,68,255],[134,28,62,255],[137,30,56,255],[140,32,50,255],[143,34,47,255],[146,36,44,255],[149,38,41,255],[152,40,38,255],[155,41,35,255],[158,43,32,255],[161,45,29,255],[164,47,26,255],[166,49,24,255],[169,51,21,255],[172,53,18,255],[175,55,15,255],[178,56,12,255],[181,58,9,255],[184,60,6,255],[187,62,3,255],[190,64,0,255],[194,66,0,255],[198,68,0,255],[201,70,0,255],[205,72,0,255],[209,73,0,255],[213,75,0,255],[217,77,0,255],[221,79,0,255],[224,81,0,255],[228,83,0,255],[232,85,0,255],[236,87,0,255],[240,88,0,255],[244,90,0,255],[247,92,0,255],[251,94,0,255],[255,96,0,255],[255,98,3,255],[255,100,6,255],[255,102,9,255],[255,104,12,255],[255,105,15,255],[255,107,18,255],[255,109,21,255],[255,111,24,255],[255,113,26,255],[255,115,29,255],[255,117,32,255],[255,119,35,255],[255,120,38,255],[255,122,41,255],[255,124,44,255],[255,126,47,255],[255,128,50,255],[255,130,53,255],[255,132,56,255],[255,134,59,255],[255,136,62,255],[255,137,65,255],[255,139,68,255],[255,141,71,255],[255,143,74,255],[255,145,76,255],[255,147,79,255],[255,149,82,255],[255,151,85,255],[255,152,88,255],[255,154,91,255],[255,156,94,255],[255,158,97,255],[255,160,100,255],[255,162,103,255],[255,164,106,255],[255,166,109,255],[255,168,112,255],[255,169,115,255],[255,171,118,255],[255,173,121,255],[255,175,124,255],[255,177,126,255],[255,179,129,255],[255,181,132,255],[255,183,135,255],[255,184,138,255],[255,186,141,255],[255,188,144,255],[255,190,147,255],[255,192,150,255],[255,194,153,255],[255,196,156,255],[255,198,159,255],[255,200,162,255],[255,201,165,255],[255,203,168,255],[255,205,171,255],[255,207,174,255],[255,209,176,255],[255,211,179,255],[255,213,182,255],[255,215,185,255],[255,216,188,255],[255,218,191,255],[255,220,194,255],[255,222,197,255],[255,224,200,255],[255,226,203,255],[255,228,206,255],[255,229,210,255],[255,231,213,255],[255,233,216,255],[255,235,219,255],[255,237,223,255],[255,239,226,255],[255,240,229,255],[255,242,232,255],[255,244,236,255],[255,246,239,255],[255,248,242,255],[255,250,245,255],[255,251,249,255],[255,253,252,255],[255,255,255,255]]},pet20Step:{name:"PET 20 Step",numColors:256,colors:[[0,0,0,255],[0,0,0,255],[0,0,0,255],[0,0,0,255],[0,0,0,255],[0,0,0,255],[0,0,0,255],[0,0,0,255],[0,0,0,255],[0,0,0,255],[0,0,0,255],[0,0,0,255],[0,0,0,255],[96,0,80,255],[96,0,80,255],[96,0,80,255],[96,0,80,255],[96,0,80,255],[96,0,80,255],[96,0,80,255],[96,0,80,255],[96,0,80,255],[96,0,80,255],[96,0,80,255],[96,0,80,255],[96,0,80,255],[48,48,80,255],[48,48,80,255],[48,48,80,255],[48,48,80,255],[48,48,80,255],[48,48,80,255],[48,48,80,255],[48,48,80,255],[48,48,80,255],[48,48,80,255],[48,48,80,255],[48,48,80,255],[48,48,80,255],[48,48,112,255],[48,48,112,255],[48,48,112,255],[48,48,112,255],[48,48,112,255],[48,48,112,255],[48,48,112,255],[48,48,112,255],[48,48,112,255],[48,48,112,255],[48,48,112,255],[48,48,112,255],[80,80,128,255],[80,80,128,255],[80,80,128,255],[80,80,128,255],[80,80,128,255],[80,80,128,255],[80,80,128,255],[80,80,128,255],[80,80,128,255],[80,80,128,255],[80,80,128,255],[80,80,128,255],[80,80,128,255],[96,96,176,255],[96,96,176,255],[96,96,176,255],[96,96,176,255],[96,96,176,255],[96,96,176,255],[96,96,176,255],[96,96,176,255],[96,96,176,255],[96,96,176,255],[96,96,176,255],[96,96,176,255],[96,96,176,255],[112,112,192,255],[112,112,192,255],[112,112,192,255],[112,112,192,255],[112,112,192,255],[112,112,192,255],[112,112,192,255],[112,112,192,255],[112,112,192,255],[112,112,192,255],[112,112,192,255],[112,112,192,255],[112,112,192,255],[128,128,224,255],[128,128,224,255],[128,128,224,255],[128,128,224,255],[128,128,224,255],[128,128,224,255],[128,128,224,255],[128,128,224,255],[128,128,224,255],[128,128,224,255],[128,128,224,255],[128,128,224,255],[48,96,48,255],[48,96,48,255],[48,96,48,255],[48,96,48,255],[48,96,48,255],[48,96,48,255],[48,96,48,255],[48,96,48,255],[48,96,48,255],[48,96,48,255],[48,96,48,255],[48,96,48,255],[48,96,48,255],[48,144,48,255],[48,144,48,255],[48,144,48,255],[48,144,48,255],[48,144,48,255],[48,144,48,255],[48,144,48,255],[48,144,48,255],[48,144,48,255],[48,144,48,255],[48,144,48,255],[48,144,48,255],[48,144,48,255],[80,192,80,255],[80,192,80,255],[80,192,80,255],[80,192,80,255],[80,192,80,255],[80,192,80,255],[80,192,80,255],[80,192,80,255],[80,192,80,255],[80,192,80,255],[80,192,80,255],[80,192,80,255],[80,192,80,255],[64,224,64,255],[64,224,64,255],[64,224,64,255],[64,224,64,255],[64,224,64,255],[64,224,64,255],[64,224,64,255],[64,224,64,255],[64,224,64,255],[64,224,64,255],[64,224,64,255],[64,224,64,255],[224,224,80,255],[224,224,80,255],[224,224,80,255],[224,224,80,255],[224,224,80,255],[224,224,80,255],[224,224,80,255],[224,224,80,255],[224,224,80,255],[224,224,80,255],[224,224,80,255],[224,224,80,255],[224,224,80,255],[208,208,96,255],[208,208,96,255],[208,208,96,255],[208,208,96,255],[208,208,96,255],[208,208,96,255],[208,208,96,255],[208,208,96,255],[208,208,96,255],[208,208,96,255],[208,208,96,255],[208,208,96,255],[208,208,96,255],[208,176,64,255],[208,176,64,255],[208,176,64,255],[208,176,64,255],[208,176,64,255],[208,176,64,255],[208,176,64,255],[208,176,64,255],[208,176,64,255],[208,176,64,255],[208,176,64,255],[208,176,64,255],[208,176,64,255],[208,144,0,255],[208,144,0,255],[208,144,0,255],[208,144,0,255],[208,144,0,255],[208,144,0,255],[208,144,0,255],[208,144,0,255],[208,144,0,255],[208,144,0,255],[208,144,0,255],[208,144,0,255],[192,96,0,255],[192,96,0,255],[192,96,0,255],[192,96,0,255],[192,96,0,255],[192,96,0,255],[192,96,0,255],[192,96,0,255],[192,96,0,255],[192,96,0,255],[192,96,0,255],[192,96,0,255],[192,96,0,255],[176,48,0,255],[176,48,0,255],[176,48,0,255],[176,48,0,255],[176,48,0,255],[176,48,0,255],[176,48,0,255],[176,48,0,255],[176,48,0,255],[176,48,0,255],[176,48,0,255],[176,48,0,255],[176,48,0,255],[255,0,0,255],[255,0,0,255],[255,0,0,255],[255,0,0,255],[255,0,0,255],[255,0,0,255],[255,0,0,255],[255,0,0,255],[255,0,0,255],[255,0,0,255],[255,0,0,255],[255,0,0,255],[255,0,0,255],[255,255,255,255],[255,255,255,255],[255,255,255,255],[255,255,255,255],[255,255,255,255],[255,255,255,255],[255,255,255,255],[255,255,255,255],[255,255,255,255],[255,255,255,255],[255,255,255,255],[255,255,255,255],[255,255,255,255]]},gray:{name:"Gray",numColors:256,gamma:1,segmentedData:{red:[[0,0,0],[1,1,1]],green:[[0,0,0],[1,1,1]],blue:[[0,0,0],[1,1,1]]}},jet:{name:"Jet",numColors:256,gamma:1,segmentedData:{red:[[0,0,0],[.35,0,0],[.66,1,1],[.89,1,1],[1,.5,.5]],green:[[0,0,0],[.125,0,0],[.375,1,1],[.64,1,1],[.91,0,0],[1,0,0]],blue:[[0,.5,.5],[.11,1,1],[.34,1,1],[.65,0,0],[1,0,0]]}},hsv:{name:"HSV",numColors:256,gamma:1,segmentedData:{red:[[0,1,1],[.15873,1,1],[.174603,.96875,.96875],[.333333,.03125,.03125],[.349206,0,0],[.666667,0,0],[.68254,.03125,.03125],[.84127,.96875,.96875],[.857143,1,1],[1,1,1]],green:[[0,0,0],[.15873,.9375,.9375],[.174603,1,1],[.507937,1,1],[.666667,.0625,.0625],[.68254,0,0],[1,0,0]],blue:[[0,0,0],[.333333,0,0],[.349206,.0625,.0625],[.507937,1,1],[.84127,1,1],[.857143,.9375,.9375],[1,.09375,.09375]]}},hot:{name:"Hot",numColors:256,gamma:1,segmentedData:{red:[[0,.0416,.0416],[.365079,1,1],[1,1,1]],green:[[0,0,0],[.365079,0,0],[.746032,1,1],[1,1,1]],blue:[[0,0,0],[.746032,0,0],[1,1,1]]}},cool:{name:"Cool",numColors:256,gamma:1,segmentedData:{red:[[0,0,0],[1,1,1]],green:[[0,1,1],[1,0,0]],blue:[[0,1,1],[1,1,1]]}},spring:{name:"Spring",numColors:256,gamma:1,segmentedData:{red:[[0,1,1],[1,1,1]],green:[[0,0,0],[1,1,1]],blue:[[0,1,1],[1,0,0]]}},summer:{name:"Summer",numColors:256,gamma:1,segmentedData:{red:[[0,0,0],[1,1,1]],green:[[0,.5,.5],[1,1,1]],blue:[[0,.4,.4],[1,.4,.4]]}},autumn:{name:"Autumn",numColors:256,gamma:1,segmentedData:{red:[[0,1,1],[1,1,1]],green:[[0,0,0],[1,1,1]],blue:[[0,0,0],[1,0,0]]}},winter:{name:"Winter",numColors:256,gamma:1,segmentedData:{red:[[0,0,0],[1,0,0]],green:[[0,0,0],[1,1,1]],blue:[[0,1,1],[1,.5,.5]]}},bone:{name:"Bone",numColors:256,gamma:1,segmentedData:{red:[[0,0,0],[.746032,.652778,.652778],[1,1,1]],green:[[0,0,0],[.365079,.319444,.319444],[.746032,.777778,.777778],[1,1,1]],blue:[[0,0,0],[.365079,.444444,.444444],[1,1,1]]}},copper:{name:"Copper",numColors:256,gamma:1,segmentedData:{red:[[0,0,0],[.809524,1,1],[1,1,1]],green:[[0,0,0],[1,.7812,.7812]],blue:[[0,0,0],[1,.4975,.4975]]}},spectral:{name:"Spectral",numColors:256,gamma:1,segmentedData:{red:[[0,0,0],[.05,.4667,.4667],[.1,.5333,.5333],[.15,0,0],[.2,0,0],[.25,0,0],[.3,0,0],[.35,0,0],[.4,0,0],[.45,0,0],[.5,0,0],[.55,0,0],[.6,0,0],[.65,.7333,.7333],[.7,.9333,.9333],[.75,1,1],[.8,1,1],[.85,1,1],[.9,.8667,.8667],[.95,.8,.8],[1,.8,.8]],green:[[0,0,0],[.05,0,0],[.1,0,0],[.15,0,0],[.2,0,0],[.25,.4667,.4667],[.3,.6,.6],[.35,.6667,.6667],[.4,.6667,.6667],[.45,.6,.6],[.5,.7333,.7333],[.55,.8667,.8667],[.6,1,1],[.65,1,1],[.7,.9333,.9333],[.75,.8,.8],[.8,.6,.6],[.85,0,0],[.9,0,0],[.95,0,0],[1,.8,.8]],blue:[[0,0,0],[.05,.5333,.5333],[.1,.6,.6],[.15,.6667,.6667],[.2,.8667,.8667],[.25,.8667,.8667],[.3,.8667,.8667],[.35,.6667,.6667],[.4,.5333,.5333],[.45,0,0],[.5,0,0],[.55,0,0],[.6,0,0],[.65,0,0],[.7,0,0],[.75,0,0],[.8,0,0],[.85,0,0],[.9,0,0],[.95,0,0],[1,.8,.8]]}},coolwarm:{name:"CoolWarm",numColors:256,gamma:1,segmentedData:{red:[[0,.2298057,.2298057],[.03125,.26623388,.26623388],[.0625,.30386891,.30386891],[.09375,.342804478,.342804478],[.125,.38301334,.38301334],[.15625,.424369608,.424369608],[.1875,.46666708,.46666708],[.21875,.509635204,.509635204],[.25,.552953156,.552953156],[.28125,.596262162,.596262162],[.3125,.639176211,.639176211],[.34375,.681291281,.681291281],[.375,.722193294,.722193294],[.40625,.761464949,.761464949],[.4375,.798691636,.798691636],[.46875,.833466556,.833466556],[.5,.865395197,.865395197],[.53125,.897787179,.897787179],[.5625,.924127593,.924127593],[.59375,.944468518,.944468518],[.625,.958852946,.958852946],[.65625,.96732803,.96732803],[.6875,.969954137,.969954137],[.71875,.966811177,.966811177],[.75,.958003065,.958003065],[.78125,.943660866,.943660866],[.8125,.923944917,.923944917],[.84375,.89904617,.89904617],[.875,.869186849,.869186849],[.90625,.834620542,.834620542],[.9375,.795631745,.795631745],[.96875,.752534934,.752534934],[1,.705673158,.705673158]],green:[[0,.298717966,.298717966],[.03125,.353094838,.353094838],[.0625,.406535296,.406535296],[.09375,.458757618,.458757618],[.125,.50941904,.50941904],[.15625,.558148092,.558148092],[.1875,.604562568,.604562568],[.21875,.648280772,.648280772],[.25,.688929332,.688929332],[.28125,.726149107,.726149107],[.3125,.759599947,.759599947],[.34375,.788964712,.788964712],[.375,.813952739,.813952739],[.40625,.834302879,.834302879],[.4375,.849786142,.849786142],[.46875,.860207984,.860207984],[.5,.86541021,.86541021],[.53125,.848937047,.848937047],[.5625,.827384882,.827384882],[.59375,.800927443,.800927443],[.625,.769767752,.769767752],[.65625,.734132809,.734132809],[.6875,.694266682,.694266682],[.71875,.650421156,.650421156],[.75,.602842431,.602842431],[.78125,.551750968,.551750968],[.8125,.49730856,.49730856],[.84375,.439559467,.439559467],[.875,.378313092,.378313092],[.90625,.312874446,.312874446],[.9375,.24128379,.24128379],[.96875,.157246067,.157246067],[1,.01555616,.01555616]],blue:[[0,.753683153,.753683153],[.03125,.801466763,.801466763],[.0625,.84495867,.84495867],[.09375,.883725899,.883725899],[.125,.917387822,.917387822],[.15625,.945619588,.945619588],[.1875,.968154911,.968154911],[.21875,.98478814,.98478814],[.25,.995375608,.995375608],[.28125,.999836203,.999836203],[.3125,.998151185,.998151185],[.34375,.990363227,.990363227],[.375,.976574709,.976574709],[.40625,.956945269,.956945269],[.4375,.931688648,.931688648],[.46875,.901068838,.901068838],[.5,.865395561,.865395561],[.53125,.820880546,.820880546],[.5625,.774508472,.774508472],[.59375,.726736146,.726736146],[.625,.678007945,.678007945],[.65625,.628751763,.628751763],[.6875,.579375448,.579375448],[.71875,.530263762,.530263762],[.75,.481775914,.481775914],[.78125,.434243684,.434243684],[.8125,.387970225,.387970225],[.84375,.343229596,.343229596],[.875,.300267182,.300267182],[.90625,.259301199,.259301199],[.9375,.220525627,.220525627],[.96875,.184115123,.184115123],[1,.150232812,.150232812]]}},blues:{name:"Blues",numColors:256,gamma:1,segmentedData:{red:[[0,.9686274528503418,.9686274528503418],[.125,.8705882430076599,.8705882430076599],[.25,.7764706015586853,.7764706015586853],[.375,.6196078658103943,.6196078658103943],[.5,.41960784792900085,.41960784792900085],[.625,.25882354378700256,.25882354378700256],[.75,.12941177189350128,.12941177189350128],[.875,.0313725508749485,.0313725508749485],[1,.0313725508749485,.0313725508749485]],green:[[0,.9843137264251709,.9843137264251709],[.125,.9215686321258545,.9215686321258545],[.25,.8588235378265381,.8588235378265381],[.375,.7921568751335144,.7921568751335144],[.5,.6823529601097107,.6823529601097107],[.625,.572549045085907,.572549045085907],[.75,.4431372582912445,.4431372582912445],[.875,.3176470696926117,.3176470696926117],[1,.1882352977991104,.1882352977991104]],blue:[[0,1,1],[.125,.9686274528503418,.9686274528503418],[.25,.9372549057006836,.9372549057006836],[.375,.8823529481887817,.8823529481887817],[.5,.8392156958580017,.8392156958580017],[.625,.7764706015586853,.7764706015586853],[.75,.7098039388656616,.7098039388656616],[.875,.6117647290229797,.6117647290229797],[1,.41960784792900085,.41960784792900085]]}}};function oe(e,t){var r,n=[],o=t.length;for(e.sort(function(e,t){return e-t}),r=0;r<o;r++)n[r]=function(e,t){for(var r=0,n=e.length-1;r<=n;){var o=r+Math.floor((n-r)/2),a=e[o];if(a===t)return o;t<a?n=o-1:r=o+1}return r}(e,t[r]);return n}function ae(e,t,r){var n=[],o=[],a=[],i=[];for(r=null===r?1:r,u=0;u<t.length;u++){var l=t[u];n.push((e-1)*l[0]),o.push(l[1]),a.push(l[1])}for(var s=function(e,t,r){for(var n=(t-e)/((r=null===r?100:r)-1),o=[];0<r--;)o.push(e),e+=n;return o[o.length-1]=t,o}(0,1,e),u=0;u<e;u++)s[u]=(e-1)*Math.pow(s[u],r);var d=oe(n,s);for(u=1;u<e-1;u++){var m=d[u],c=(s[u]-n[m-1])/(n[m]-n[m-1]);i[u]=c*(o[m]-a[m-1])+a[m-1]}return i[0]=a[0],i[e-1]=o[t.length-1],i}function ie(e,t){var n=p[e];return!(n=n||(p[e]=t||{name:"",colors:[]})).colors&&n.segmentedData&&(n.colors=function(e,t,r){for(var n=[],o=ae(t=null===t?256:t,e.red,r=null===r?1:r),a=ae(t,e.green,r),i=ae(t,e.blue,r),l=0;l<t;l++){var s=Math.round(255*o[l]),u=Math.round(255*a[l]),d=Math.round(255*i[l]);n.push([s,u,d,255])}return n}(n.segmentedData,n.numColors,n.gamma)),{getId:function(){return e},getColorSchemeName:function(){return n.name},setColorSchemeName:function(e){n.name=e},getNumberOfColors:function(){return n.colors.length},setNumberOfColors:function(e){for(;n.colors.length<e;)n.colors.push(ne);n.colors.length=e},getColor:function(e){return this.isValidIndex(e)?n.colors[e]:ne},getColorRepeating:function(e){var t=n.colors.length;return this.getColor(e=t?e%t:0)},setColor:function(e,t){this.isValidIndex(e)&&(n.colors[e]=t)},addColor:function(e){n.colors.push(e)},insertColor:function(e,t){this.isValidIndex(e)&&n.colors.splice(e,1,t)},removeColor:function(e){this.isValidIndex(e)&&n.colors.splice(e,1)},clearColors:function(){n.colors=[]},buildLookupTable:function(e){if(e){var t=n.colors.length;e.setNumberOfTableValues(t);for(var r=0;r<t;r++)e.setTableValue(r,n.colors[r])}},createLookupTable:function(){var e=new re;return this.buildLookupTable(e),e},isValidIndex:function(e){return 0<=e&&e<n.colors.length}}}var w={getColormap:ie,getColormapsList:function(){var r=[];return Object.keys(p).forEach(function(e){var t;p.hasOwnProperty(e)&&(t=p[e],r.push({id:e,name:t.name}))}),r.sort(function(e,t){e=e.name.toLowerCase(),t=t.name.toLowerCase();return e===t?0:e<t?-1:1}),r},LookupTable:re};function le(e,t){if(e.color&&!e.falseColor)throw new Error("Color transforms are not implemented yet");var r,n,o=e.minPixelValue,a=0,i=0,l=e.width*e.height,s=e.origPixelData||e.getPixelData(),u=new Uint8Array(4*l);if(e.color=!0,e.falseColor=!0,e.origPixelData=s,t instanceof w.LookupTable)for(t.build();i<l;)r=s[i++],n=t.mapValue(r),u[a++]=n[0],u[a++]=n[1],u[a++]=n[2],u[a++]=n[3];else if(o<0)for(;i<l;)r=s[i++],u[a++]=t[r+-o][0],u[a++]=t[r+-o][1],u[a++]=t[r+-o][2],u[a++]=t[r+-o][3];else for(;i<l;)r=s[i++],u[a++]=t[r][0],u[a++]=t[r][1],u[a++]=t[r][2],u[a++]=t[r][3];e.rgba=!0,e.cachedLut=void 0,e.render=void 0,e.slope=1,e.intercept=0,e.minPixelValue=0,e.maxPixelValue=255,e.windowWidth=255,e.windowCenter=128,e.getPixelData=function(){return u}}function se(e){return!(!e.restore||"function"!=typeof e.restore||(e.restore(),0))}function ue(e,t){if(e.color&&!e.falseColor)throw new Error("Color transforms are not implemented yet");var r,n,o,a,i,l,s,u,d,m,c,f=(t=f=(f=t)&&"string"==typeof f?ie(f):f).getId();return e.colormapId!==f&&(se(e),f&&(n=e.minPixelValue||0,r=e.maxPixelValue||255,e.restore=(o=e).restore||(a=o.color,i=o.rgba,l=o.cachedLut,s=o.slope,u=o.windowWidth,d=o.windowCenter,m=o.minPixelValue,c=o.maxPixelValue,function(){var e;o.color=a,o.rgba=i,o.cachedLut=l,o.slope=s,o.windowWidth=u,o.windowCenter=d,o.minPixelValue=m,o.maxPixelValue=c,o.origPixelData&&(e=o.origPixelData,o.getPixelData=function(){return e}),o.origPixelData=void 0,o.colormapId=void 0,o.falseColor=void 0}),(t=t.createLookupTable()).setTableRange(n,r),le(e,t),n=function(e){for(var t,r=Number.MAX_VALUE,n=Number.MIN_VALUE,o=e.length,a=0;a<o;a++)r=r<(t=e[a])?r:t,n=t<n?n:t;return{minPixelValue:r,maxPixelValue:n}}(e.getPixelData()),e.minPixelValue=n.minPixelValue,e.maxPixelValue=n.maxPixelValue,e.windowWidth=255,e.windowCenter=128,e.colormapId=f),!0)}function de(e,t){return ue(c(e).image,t)}function me(e,t){e=c(e);return!1===e.data.hasOwnProperty(t)&&(e.data[t]={}),e.data[t]}function ce(e,t){delete c(e).data[t]}var fe=1073741824,b=0,y={},x=[];function ge(){if(!(b<=fe)){for(x.sort(function(e,t){return e.timeStamp>t.timeStamp?-1:e.timeStamp<t.timeStamp?1:0});fe<b;){var e=x[x.length-1].imageId;pe(e),g(a,d.IMAGE_CACHE_PROMISE_REMOVED,{imageId:e})}var t=we();g(a,d.IMAGE_CACHE_FULL,t)}}function he(t,e){if(void 0===t)throw new Error("putImageLoadObject: imageId must not be undefined");if(void 0===e.promise)throw new Error("putImageLoadObject: imageLoadObject.promise must not be undefined");if(!0===y.hasOwnProperty(t))throw new Error("putImageLoadObject: imageId already in cache");if(e.cancelFn&&"function"!=typeof e.cancelFn)throw new Error("putImageLoadObject: imageLoadObject.cancelFn must be a function");var r={loaded:!1,imageId:t,sharedCacheKey:void 0,imageLoadObject:e,timeStamp:Date.now(),sizeInBytes:0};y[t]=r,x.push(r),e.promise.then(function(e){if(-1!==x.indexOf(r)){if(r.loaded=!0,void 0===(r.image=e).sizeInBytes)throw new Error("putImageLoadObject: image.sizeInBytes must not be undefined");if(void 0===e.sizeInBytes.toFixed)throw new Error("putImageLoadObject: image.sizeInBytes is not a number");r.sizeInBytes=e.sizeInBytes,b+=r.sizeInBytes;var t={action:"addImage",image:r};g(a,d.IMAGE_CACHE_CHANGED,t),r.sharedCacheKey=e.sharedCacheKey,ge()}},function(){var e=y[t];x.splice(x.indexOf(e),1),delete y[t]})}function ve(e){if(void 0===e)throw new Error("getImageLoadObject: imageId must not be undefined");e=y[e];if(void 0!==e)return e.timeStamp=Date.now(),e.imageLoadObject}function pe(e){if(void 0===e)throw new Error("removeImageLoadObject: imageId must not be undefined");var t,r=y[e];if(void 0===r)throw new Error("removeImageLoadObject: imageId was not present in imageCache");x.splice(x.indexOf(r),1),b-=r.sizeInBytes,g(a,d.IMAGE_CACHE_CHANGED,{action:"deleteImage",image:r}),(t=r.imageLoadObject).promise.then(function(){t.decache&&t.decache()},function(){t.decache&&t.decache()}),delete y[e]}function we(){return{maximumSizeInBytes:fe,cacheSizeInBytes:b,numberOfImagesCached:x.length}}var be,ye={imageCache:y,cachedImages:x,setMaximumSizeBytes:function(e){if(void 0===e)throw new Error("setMaximumSizeBytes: parameter numBytes must not be undefined");if(void 0===e.toFixed)throw new Error("setMaximumSizeBytes: parameter numBytes must be a number");fe=e,g(a,d.IMAGE_CACHE_MAXIMUM_SIZE_CHANGED),ge()},putImageLoadObject:he,getImageLoadObject:ve,removeImageLoadObject:pe,getCacheInfo:we,purgeCache:function(){for(;0<x.length;)pe(x[0].imageId)},changeImageIdCacheSize:function(e,r){var n=y[e];n&&n.imageLoadObject.promise.then(function(e){var t=r-e.sizeInBytes,t=(e.sizeInBytes=r,n.sizeInBytes=r,b+=t,{action:"changeImageSize",image:e});g(a,d.IMAGE_CACHE_CHANGED,t)})}},xe={};function Ee(t,e){var r=t.indexOf(":"),r=t.substring(0,r),r=xe[r];if(null==r){if(void 0!==be)return be(t);throw new Error("loadImageFromImageLoader: no image loader for imageId")}r=r(t,e);return r.promise.then(function(e){g(a,d.IMAGE_LOADED,{image:e})},function(e){g(a,d.IMAGE_LOAD_FAILED,{imageId:t,error:e})}),r}function Ie(e,t){if(void 0===e)throw new Error("loadImage: parameter imageId must not be undefined");var r=ve(e);return(void 0!==r?r:Ee(e,t)).promise}function Te(e,t){if(void 0===e)throw new Error("loadAndCacheImage: parameter imageId must not be undefined");var r=ve(e);return void 0===r&&he(e,r=Ee(e,t)),r.promise}function Ce(e,t){xe[e]=t}function Le(e){var t=be;return be=e,t}function Pe(e){return(Pe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Se(e,t){var r,n,o,a,i="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(i)return n=!(r=!0),{s:function(){i=i.call(e)},n:function(){var e=i.next();return r=e.done,e},e:function(e){n=!0,o=e},f:function(){try{r||null==i.return||i.return()}finally{if(n)throw o}}};if(Array.isArray(e)||(i=function(e,t){var r;if(e)return"string"==typeof e?Re(e,t):"Map"===(r="Object"===(r=Object.prototype.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:r)||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Re(e,t):void 0}(e))||t&&e&&"number"==typeof e.length)return i&&(e=i),a=0,{s:t=function(){},n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:t};throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Re(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function De(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Ae(n.key),n)}}function E(e,t,r){(t=Ae(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r}function Ae(e){e=function(e,t){if("object"!==Pe(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!==Pe(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"===Pe(e)?e:String(e)}var _e=function(){function e(){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");E(this,"requestPool",void 0),E(this,"awake",void 0),E(this,"numRequests",void 0),E(this,"maxNumRequests",void 0),E(this,"grabDelay",void 0),E(this,"timeoutHandle",void 0),this.requestPool={interaction:{0:[]},thumbnail:{0:[]},prefetch:{0:[]}},this.awake=!1,this.grabDelay=5,this.numRequests={interaction:0,thumbnail:0,prefetch:0},this.maxNumRequests={interaction:6,thumbnail:6,prefetch:5}}var t,r,n;return t=e,(r=[{key:"destroy",value:function(){this.timeoutHandle&&window.clearTimeout(this.timeoutHandle)}},{key:"addRequest",value:function(e,t,r){var n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:0,o=4<arguments.length&&void 0!==arguments[4]&&arguments[4],e={requestFn:e,type:t,additionalDetails:r};void 0===this.requestPool[t][n]&&(this.requestPool[t][n]=[]),o?this.requestPool[t][n].unshift(e):this.requestPool[t][n].push(e),this.awake||(this.awake=!0,this.startGrabbing())}},{key:"filterRequests",value:function(r){var n=this;Object.keys(this.requestPool).forEach(function(e){var t=n.requestPool[e];Object.keys(t).forEach(function(e){t[e]=t[e].filter(function(e){return r(e)})})})}},{key:"clearRequestStack",value:function(e){if(!this.requestPool[e])throw new Error("No category for the type ".concat(e," found"));this.requestPool[e]={0:[]}}},{key:"sendRequest",value:function(e){var t=this,r=e.requestFn,n=e.type;this.numRequests[n]++,this.awake=!0,r().finally(function(){t.numRequests[n]--,t.startAgain()})}},{key:"startGrabbing",value:function(){for(var e=this.maxNumRequests.interaction+this.maxNumRequests.thumbnail+this.maxNumRequests.prefetch-(this.numRequests.interaction+this.numRequests.thumbnail+this.numRequests.prefetch),t=0;t<e;t++){var r=this.getNextRequest();if(!1===r)break;r&&this.sendRequest(r)}}},{key:"startAgain",value:function(){var e=this;this.awake&&(this.grabDelay?this.timeoutHandle=window.setTimeout(function(){e.startGrabbing()},this.grabDelay):this.startGrabbing())}},{key:"getSortedPriorityGroups",value:function(t){var r=this;return Object.keys(this.requestPool[t]).map(Number).filter(function(e){return r.requestPool[t][e].length}).sort()}},{key:"getNextRequest",value:function(){var e,t=this.getSortedPriorityGroups("interaction"),r=Se(t);try{for(r.s();!(e=r.n()).done;){var n=e.value;if(this.requestPool.interaction[n].length&&this.numRequests.interaction<this.maxNumRequests.interaction)return this.requestPool.interaction[n].shift()}}catch(e){r.e(e)}finally{r.f()}var o,a=this.getSortedPriorityGroups("thumbnail"),i=Se(a);try{for(i.s();!(o=i.n()).done;){var l=o.value;if(this.requestPool.thumbnail[l].length&&this.numRequests.thumbnail<this.maxNumRequests.thumbnail)return this.requestPool.thumbnail[l].shift()}}catch(e){i.e(e)}finally{i.f()}var s,u=this.getSortedPriorityGroups("prefetch"),d=Se(u);try{for(d.s();!(s=d.n()).done;){var m=s.value;if(this.requestPool.prefetch[m].length&&this.numRequests.prefetch<this.maxNumRequests.prefetch)return this.requestPool.prefetch[m].shift()}}catch(e){d.e(e)}finally{d.f()}return t.length||a.length||u.length||(this.awake=!1),!1}},{key:"getRequestPool",value:function(){return this.requestPool}}])&&De(t.prototype,r),n&&De(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}(),t=new _e,Me=(t.maxNumRequests={interaction:1e3,thumbnail:1e3,prefetch:1e3},t.grabDelay=0,t),t=new _e,Oe=(t.maxNumRequests={interaction:20,thumbnail:20,prefetch:20},t.grabDelay=0,t);function Ne(e){return(Ne="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ve(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,function(e){e=function(e,t){if("object"!==Ne(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!==Ne(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"===Ne(e)?e:String(e)}(n.key),n)}}function Ue(e){return ke(e)}var Be=function(){function t(){if(!(this instanceof t))throw new TypeError("Cannot call a class as a function");this.reset()}var e,r,n;return e=t,(r=[{key:"reset",value:function(){this.m=[1,0,0,1,0,0]}},{key:"clone",value:function(){var e=new t;return e.m[0]=this.m[0],e.m[1]=this.m[1],e.m[2]=this.m[2],e.m[3]=this.m[3],e.m[4]=this.m[4],e.m[5]=this.m[5],e}},{key:"multiply",value:function(e){var t=this.m[0]*e.m[0]+this.m[2]*e.m[1],r=this.m[1]*e.m[0]+this.m[3]*e.m[1],n=this.m[0]*e.m[2]+this.m[2]*e.m[3],o=this.m[1]*e.m[2]+this.m[3]*e.m[3],a=this.m[0]*e.m[4]+this.m[2]*e.m[5]+this.m[4],e=this.m[1]*e.m[4]+this.m[3]*e.m[5]+this.m[5];this.m[0]=t,this.m[1]=r,this.m[2]=n,this.m[3]=o,this.m[4]=a,this.m[5]=e}},{key:"invert",value:function(){var e=1/(this.m[0]*this.m[3]-this.m[1]*this.m[2]),t=this.m[3]*e,r=-this.m[1]*e,n=-this.m[2]*e,o=this.m[0]*e,a=e*(this.m[2]*this.m[5]-this.m[3]*this.m[4]),e=e*(this.m[1]*this.m[4]-this.m[0]*this.m[5]);this.m[0]=t,this.m[1]=r,this.m[2]=n,this.m[3]=o,this.m[4]=a,this.m[5]=e}},{key:"rotate",value:function(e){var t=Math.cos(e),e=Math.sin(e),r=this.m[0]*t+this.m[2]*e,n=this.m[1]*t+this.m[3]*e,o=this.m[0]*-e+this.m[2]*t,e=this.m[1]*-e+this.m[3]*t;this.m[0]=r,this.m[1]=n,this.m[2]=o,this.m[3]=e}},{key:"translate",value:function(e,t){this.m[4]+=this.m[0]*e+this.m[2]*t,this.m[5]+=this.m[1]*e+this.m[3]*t}},{key:"scale",value:function(e,t){this.m[0]*=e,this.m[1]*=e,this.m[2]*=t,this.m[3]*=t}},{key:"transformPoint",value:function(e,t){var r=e,n=t;return{x:e=r*this.m[0]+n*this.m[2]+this.m[4],y:t=r*this.m[1]+n*this.m[3]+this.m[5]}}}])&&Ve(e.prototype,r),n&&Ve(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}(),ke=function(e,t){var r,n,o=new Be,a=(o.translate(e.canvas.width/2,e.canvas.height/2),e.viewport.rotation),i=(0!==a&&o.rotate(a*Math.PI/180),e.viewport.scale),l=e.viewport.scale,s=f(e.image,e.viewport),u=s.tlhc.x-1,d=s.tlhc.y-1,m=s.brhc.x-u,c=s.brhc.y-d;return"NONE"===s.presentationSizeMode?e.image.rowPixelSpacing<e.image.columnPixelSpacing?i*=e.image.columnPixelSpacing/e.image.rowPixelSpacing:e.image.columnPixelSpacing<e.image.rowPixelSpacing&&(l*=e.image.rowPixelSpacing/e.image.columnPixelSpacing):(i=s.columnPixelSpacing,l=s.rowPixelSpacing,"SCALE TO FIT"===s.presentationSizeMode&&(r=e.canvas.height/(c*l),n=e.canvas.width/(m*i),i=l=Math.min(n,r),s.rowPixelSpacing<s.columnPixelSpacing?i*=s.columnPixelSpacing/s.rowPixelSpacing:s.columnPixelSpacing<s.rowPixelSpacing&&(l*=s.rowPixelSpacing/s.columnPixelSpacing))),o.scale(i,l),0!==a&&o.rotate(-a*Math.PI/180),o.translate(e.viewport.translation.x,e.viewport.translation.y),0!==a&&o.rotate(a*Math.PI/180),void 0!==t&&o.scale(t,t),e.viewport.hflip&&o.scale(-1,1),e.viewport.vflip&&o.scale(1,-1),o.translate(-m/2,-c/2),o.translate(-u,-d),o},Ge=function(e,t){e=c(e),e=Ue(e);return e.invert(),e.transformPoint(t.x,t.y)},Fe=function(e){if(void 0===e)throw new Error("disable: element must not be undefined");for(var t=i,r=0;r<t.length;r++)if(t[r].element===e){var n={element:e};g(e,d.ELEMENT_DISABLED,n),g(a,d.ELEMENT_DISABLED,n),t[r].element.removeChild(t[r].canvas),t[r].canvas=void 0,t.splice(r,1);break}},I=function(){return(window.performance?performance:Date).now()},ze=function(e,t,r){if(void 0===e)throw new Error("displayImage: parameter element must not be undefined");if(void 0===t)throw new Error("displayImage: parameter image must not be undefined");var n,o=c(e),a=o.image;if(o.image=t,o.layers&&o.layers.length&&Q(e,t),void 0===o.viewport&&(o.viewport=s(o.canvas,t)),r)for(var i in r)null!==r[i]&&(o.viewport[i]=r[i]);void 0!==o.lastImageTimeStamp&&(n=(1e3/(I()-o.lastImageTimeStamp)).toFixed()),o.lastImageTimeStamp=I();t={viewport:o.viewport,element:o.element,image:o.image,oldImage:a,enabledElement:o,frameRate:n};g(o.element,d.NEW_IMAGE,t),m(e)},qe=function(e){e=c(e);n(e)},je=function(){for(var e=i,t=0;t<e.length;t++){var r=e[t];!0===r.invalid&&n(r,!0)}},We=function(e){var t=c(e),r=t.image;t.viewport.scale=j(t.canvas,r,t.viewport.rotation).scaleFactor,t.viewport.translation.x=0,t.viewport.translation.y=0,m(e)};var He=function(e,t){var r,n,o,a,i,l=c(e),s=l.canvas.width,u=l.canvas.height;n=e,(r=l.canvas).width!==n.clientWidth&&(r.width=n.clientWidth,r.style.width="".concat(n.clientWidth,"px")),r.height!==n.clientHeight&&(r.height=n.clientHeight,r.style.height="".concat(n.clientHeight,"px")),g(e,d.ELEMENT_RESIZED,{element:e}),void 0!==l.image&&(t||(r=s,n=u,o=(t=l).viewport.scale,a=W(t.image,t.viewport.rotation),i=Math.round(a.width*o),a=Math.round(a.height*o),o=t.viewport.translation.x,t=t.viewport.translation.y,i===r&&a<=n)||i<=r&&a===n&&0===o&&0===t?We:(r=(i=l).viewport.scale,a=i.canvas.width,n=i.canvas.height,a=Math.sqrt(a/s*(n/u)),i.viewport.scale=a*r,m))(e)},Xe=function(e){var t=(e.viewport||{}).invert,e=(e.options||{}).fillStyle;return-1!==["black","white"].indexOf(e)&&t?"white":"black"},Ye=function(e,t,r){var n=I(),o=e.getPixelData(),a=(e.stats.lastGetPixelDataTime=I()-n,o.length),i=e.minPixelValue,l=3,s=0,n=I();if(o instanceof Int16Array)if(i<0)for(;s<a;)r[l]=t[o[s++]+-i],l+=4;else for(;s<a;)r[l]=t[o[s++]],l+=4;else if(o instanceof Uint16Array)for(;s<a;)r[l]=t[o[s++]],l+=4;else if(i<0)for(;s<a;)r[l]=t[o[s++]+-i],l+=4;else for(;s<a;)r[l]=t[o[s++]],l+=4;e.stats.lastStoredPixelDataToCanvasImageDataTime=I()-n},Ke=function(e,t,r){var n,o=I(),a=e.getPixelData(),i=(e.stats.lastGetPixelDataTime=I()-o,a.length),l=e.minPixelValue,s=0,u=0,o=I();if(a instanceof Int16Array)if(l<0)for(;u<i;)n=t[a[u++]+-l],r[s++]=n,r[s++]=n,r[s++]=n,r[s++]=255;else for(;u<i;)n=t[a[u++]],r[s++]=n,r[s++]=n,r[s++]=n,r[s++]=255;else if(a instanceof Uint16Array)for(;u<i;)n=t[a[u++]],r[s++]=n,r[s++]=n,r[s++]=n,r[s++]=255;else if(l<0)for(;u<i;)n=t[a[u++]+-l],r[s++]=n,r[s++]=n,r[s++]=n,r[s++]=255;else for(;u<i;)n=t[a[u++]],r[s++]=n,r[s++]=n,r[s++]=n,r[s++]=255;e.stats.lastStoredPixelDataToCanvasImageDataTime=I()-o},T=function(e,t,r){if(void 0===e)throw new Error("setToPixelCoordinateSystem: parameter enabledElement must not be undefined");if(void 0===t)throw new Error("setToPixelCoordinateSystem: parameter context must not be undefined");e=ke(e,r);t.setTransform(e.m[0],e.m[1],e.m[2],e.m[3],e.m[4],e.m[5])},t={};var Ze={storedPixelDataToImageData:function(e){for(var t=e.getPixelData(),r=new Uint8Array(e.width*e.height*3),n=0,o=0;o<t.length;o++){var a=Math.abs(t[o]);r[n++]=255&a,r[n++]=a>>8,r[n++]=t[o]<0?0:1}return r}},$e=(t.frag="precision mediump float;uniform sampler2D u_image;uniform float ww;uniform float wc;uniform float slope;uniform float intercept;uniform int invert;varying vec2 v_texCoord;void main() {vec4 color = texture2D(u_image, v_texCoord);float intensity = color.r*256.0 + color.g*65536.0;if (color.b == 0.0)intensity = -intensity;intensity = intensity * slope + intercept;float center0 = wc - 0.5;float width0 = max(ww, 1.0);intensity = (intensity - center0) / width0 + 0.5;intensity = clamp(intensity, 0.0, 1.0);gl_FragColor = vec4(intensity, intensity, intensity, 1.0);if (invert == 1)gl_FragColor.rgb = 1.0 - gl_FragColor.rgb;}",{});var Je={storedPixelDataToImageData:function(e){for(var t=e.getPixelData(),r=new Uint8Array(e.width*e.height*2),n=0,o=0;o<t.length;o++)r[n++]=t[o],r[n++]=t[o]<0?0:1;return r}},Qe=($e.frag="precision mediump float;uniform sampler2D u_image;uniform float ww;uniform float wc;uniform float slope;uniform float intercept;uniform int invert;varying vec2 v_texCoord;void main() {vec4 color = texture2D(u_image, v_texCoord);float intensity = color.r*256.;if (color.a == 0.0)intensity = -intensity;intensity = intensity * slope + intercept;float center0 = wc - 0.5;float width0 = max(ww, 1.0);intensity = (intensity - center0) / width0 + 0.5;intensity = clamp(intensity, 0.0, 1.0);gl_FragColor = vec4(intensity, intensity, intensity, 1.0);if (invert == 1)gl_FragColor.rgb = 1.0 - gl_FragColor.rgb;}",{});var et={storedPixelDataToImageData:function(e){var t=e.minPixelValue,r=0,n=0,o=e.width*e.height*4,a=e.width*e.height*3,i=e.getPixelData(),l=new Uint8Array(a);if(t<0)for(;n<o;)l[r++]=i[n++]+-t,l[r++]=i[n++]+-t,l[r++]=i[n++]+-t,n+=1;else for(;n<o;)l[r++]=i[n++],l[r++]=i[n++],l[r++]=i[n++],n+=1;return l}},tt=(Qe.frag="precision mediump float;uniform sampler2D u_image;uniform float ww;uniform float wc;uniform float slope;uniform float intercept;uniform float minPixelValue;uniform int invert;varying vec2 v_texCoord;void main() {vec3 color = texture2D(u_image, v_texCoord).xyz;color = color * 256.0 * slope + intercept;float center0 = wc - 0.5 - minPixelValue;float width0 = max(ww, 1.0);color = (color - center0) / width0 + 0.5;gl_FragColor = vec4(color, 1);if (invert == 1)gl_FragColor.rgb = 1. - gl_FragColor.rgb;}",{});var rt={storedPixelDataToImageData:function(e){for(var t=e.getPixelData(),r=new Uint8Array(e.width*e.height*2),n=0,o=0;o<t.length;o++){var a=t[o];r[n++]=255&a,r[n++]=a>>8}return r}},nt=(tt.frag="precision mediump float;uniform sampler2D u_image;uniform float ww;uniform float wc;uniform float slope;uniform float intercept;uniform int invert;varying vec2 v_texCoord;void main() {vec4 color = texture2D(u_image, v_texCoord);float intensity = color.r*256.0 + color.a*65536.0;intensity = intensity * slope + intercept;float center0 = wc - 0.5;float width0 = max(ww, 1.0);intensity = (intensity - center0) / width0 + 0.5;intensity = clamp(intensity, 0.0, 1.0);gl_FragColor = vec4(intensity, intensity, intensity, 1.0);if (invert == 1)gl_FragColor.rgb = 1.0 - gl_FragColor.rgb;}",{});var ot={storedPixelDataToImageData:function(e){return e.getPixelData()}},C=(nt.frag="precision mediump float;uniform sampler2D u_image;uniform float ww;uniform float wc;uniform float slope;uniform float intercept;uniform int invert;varying vec2 v_texCoord;void main() {vec4 color = texture2D(u_image, v_texCoord);float intensity = color.r*256.0;intensity = intensity * slope + intercept;float center0 = wc - 0.5;float width0 = max(ww, 1.0);intensity = (intensity - center0) / width0 + 0.5;intensity = clamp(intensity, 0.0, 1.0);gl_FragColor = vec4(intensity, intensity, intensity, 1.0);if (invert == 1)gl_FragColor.rgb = 1.0 - gl_FragColor.rgb;}",{int16:t,int8:$e,rgb:Qe,uint16:tt,uint8:nt}),at={int16:Ze,int8:Je,rgb:et,uint16:rt,uint8:ot},it="attribute vec2 a_position;attribute vec2 a_texCoord;uniform vec2 u_resolution;varying vec2 v_texCoord;void main() {vec2 zeroToOne = a_position / u_resolution;vec2 zeroToTwo = zeroToOne * 2.0;vec2 clipSpace = zeroToTwo - 1.0;gl_Position = vec4(clipSpace * vec2(1, -1), 0, 1);v_texCoord = a_texCoord;}",L={},P=[],lt=268435456,S=0;function st(){if(!(S<=lt)){for(P.sort(function(e,t){return e.timeStamp>t.timeStamp?-1:e.timeStamp<t.timeStamp?1:0});lt<S;){var e=P[P.length-1];S-=e.sizeInBytes,delete L[e.imageId],P.pop(),g(a,d.WEBGL_TEXTURE_REMOVED,{imageId:e.imageId})}var t={maximumSizeInBytes:lt,cacheSizeInBytes:S,numberOfImagesCached:P.length};g(a,d.WEBGL_TEXTURE_CACHE_FULL,t)}}var ut={purgeCache:function(){for(;0<P.length;){var e=P.pop();delete L[e.imageId]}S=0},getImageTexture:function(e){if(void 0===e)throw new Error("getImageTexture: imageId must not be undefined");if(void 0!==(e=L[e]))return e.timeStamp=new Date,e.imageTexture},putImageTexture:function(e,t){var r=e.imageId;if(void 0===e)throw new Error("putImageTexture: image must not be undefined");if(void 0===r)throw new Error("putImageTexture: imageId must not be undefined");if(void 0===t)throw new Error("putImageTexture: imageTexture must not be undefined");if(!0===Object.prototype.hasOwnProperty.call(L,r))throw new Error("putImageTexture: imageId already in cache");if(e={imageId:r,imageTexture:t,timeStamp:new Date,sizeInBytes:t.sizeInBytes},L[r]=e,P.push(e),void 0===t.sizeInBytes)throw new Error("putImageTexture: imageTexture.sizeInBytes must not be undefined");if(void 0===t.sizeInBytes.toFixed)throw new Error("putImageTexture: imageTexture.sizeInBytes is not a number");S+=e.sizeInBytes,st()},removeImageTexture:function(e){if(void 0===e)throw new Error("removeImageTexture: imageId must not be undefined");var t=L[e];if(void 0===t)throw new Error("removeImageTexture: imageId must not be undefined");return P.splice(P.indexOf(t),1),S-=t.sizeInBytes,delete L[e],t.imageTexture},setMaximumSizeBytes:function(e){if(void 0===e)throw new Error("setMaximumSizeBytes: parameter numBytes must not be undefined");if(void 0===e.toFixed)throw new Error("setMaximumSizeBytes: parameter numBytes must be a number");lt=e,st()}};function dt(e,t,r){r=e.createShader(r);return e.shaderSource(r,t),e.compileShader(r),e.getShaderParameter(r,e.COMPILE_STATUS)||e.isContextLost()||(t=e.getShaderInfoLog(r),console.error("Could not compile shader:\n".concat(t))),r}var R,mt,ct,ft=function(e,t,r){var n,t=dt(e,t,e.VERTEX_SHADER),r=dt(e,r,e.FRAGMENT_SHADER);return t=t,r=r,n=(e=e).createProgram(),e.attachShader(n,t),e.attachShader(n,r),e.linkProgram(n),e.getProgramParameter(n,e.LINK_STATUS)||e.isContextLost()||(t=e.getProgramInfoLog(n),console.error("WebGL program filed to link:\n".concat(t))),n},D=document.createElement("canvas"),gt=!1;function ht(){if(!0!==gt&&function(e){R=null;try{var t={desynchronized:!0,preserveDrawingBuffer:!0};R=e.getContext("webgl",t)||e.getContext("experimental-webgl",t),e.removeEventListener("webglcontextlost",vt,!1),e.addEventListener("webglcontextlost",vt,!1),e.removeEventListener("webglcontextrestored",pt,!1),e.addEventListener("webglcontextrestored",pt,!1)}catch(e){throw new Error("Error creating WebGL context")}R||(console.error("Unable to initialize WebGL. Your browser may not support it."),R=null);return R}(D)){for(var e in ct=R.createBuffer(),R.bindBuffer(R.ARRAY_BUFFER,ct),R.bufferData(R.ARRAY_BUFFER,new Float32Array([1,1,0,1,1,0,0,0]),R.STATIC_DRAW),mt=R.createBuffer(),R.bindBuffer(R.ARRAY_BUFFER,mt),R.bufferData(R.ARRAY_BUFFER,new Float32Array([1,1,0,1,1,0,0,0]),R.STATIC_DRAW),C){e=C[e];e.attributes={},e.uniforms={},e.vert=it,e.program=ft(R,e.vert,e.frag),e.attributes.texCoordLocation=R.getAttribLocation(e.program,"a_texCoord"),R.enableVertexAttribArray(e.attributes.texCoordLocation),e.attributes.positionLocation=R.getAttribLocation(e.program,"a_position"),R.enableVertexAttribArray(e.attributes.positionLocation),e.uniforms.resolutionLocation=R.getUniformLocation(e.program,"u_resolution")}gt=!0}}function vt(e){e.preventDefault(),console.warn("WebGL Context Lost!")}function pt(e){e.preventDefault(),gt=!1,ut.purgeCache(),ht()}function wt(e){return e.color?"rgb":(e=e.getPixelData())instanceof Int16Array?"int16":e instanceof Uint16Array?"uint16":e instanceof Int8Array?"int8":"uint8"}function bt(e){var t,r,n,o,a,i=ut.getImageTexture(e.imageId);return i||(t=e,r={uint8:R.LUMINANCE,int8:R.LUMINANCE_ALPHA,uint16:R.LUMINANCE_ALPHA,int16:R.RGB,rgb:R.RGB},n=wt(t),r=r[n],o=R.createTexture(),R.bindTexture(R.TEXTURE_2D,o),R.texParameteri(R.TEXTURE_2D,R.TEXTURE_MIN_FILTER,R.NEAREST),R.texParameteri(R.TEXTURE_2D,R.TEXTURE_MAG_FILTER,R.NEAREST),R.texParameteri(R.TEXTURE_2D,R.TEXTURE_WRAP_S,R.CLAMP_TO_EDGE),R.texParameteri(R.TEXTURE_2D,R.TEXTURE_WRAP_T,R.CLAMP_TO_EDGE),R.pixelStorei(R.UNPACK_ALIGNMENT,1),a=at[n].storedPixelDataToImageData(t,t.width,t.height),R.texImage2D(R.TEXTURE_2D,0,r,t.width,t.height,0,r,R.UNSIGNED_BYTE,a),i={texture:o,sizeInBytes:t.width*t.height*{int8:1,uint16:2,int16:3,rgb:3}[n]},ut.putImageTexture(e,i)),i.texture}function yt(e,t,r,n,o){for(var a in R.clearColor(1,0,0,1),R.viewport(0,0,n,o),R.clear(R.COLOR_BUFFER_BIT|R.DEPTH_BUFFER_BIT),R.useProgram(e.program),R.bindBuffer(R.ARRAY_BUFFER,mt),R.vertexAttribPointer(e.attributes.texCoordLocation,2,R.FLOAT,!1,0,0),R.bindBuffer(R.ARRAY_BUFFER,ct),R.vertexAttribPointer(e.attributes.positionLocation,2,R.FLOAT,!1,0,0),t){var i,l=R.getUniformLocation(e.program,a);l&&(i=(a=t[a]).type,a=a.value,"i"===i?R.uniform1i(l,a):"f"===i?R.uniform1f(l,a):"2f"===i&&R.uniform2f(l,a[0],a[1]))}var s;(s=R).bufferData(s.ARRAY_BUFFER,new Float32Array([n,o,0,o,n,0,0,0]),s.STATIC_DRAW),R.activeTexture(R.TEXTURE0),R.bindTexture(R.TEXTURE_2D,r),R.drawArrays(R.TRIANGLE_STRIP,0,4)}var t={createProgramFromString:ft,renderer:{render:function(e){var t=e.image,e=(D.width=t.width,D.height=t.height,e.viewport),r=(r=wt(r=t),C.hasOwnProperty(r)?C[r]:C.rgb),n=bt(t);return yt(r,{u_resolution:{type:"2f",value:[t.width,t.height]},wc:{type:"f",value:e.voi.windowCenter},ww:{type:"f",value:e.voi.windowWidth},slope:{type:"f",value:t.slope},intercept:{type:"f",value:t.intercept},minPixelValue:{type:"f",value:t.minPixelValue},invert:{type:"i",value:e.invert?1:0}},n,t.width,t.height),D},initRenderer:ht,getRenderCanvas:function(){return D},isWebGLAvailable:function(){var e={failIfMajorPerformanceCaveat:!0};try{var t=document.createElement("canvas");return Boolean(window.WebGLRenderingContext)&&(t.getContext("webgl",e)||t.getContext("experimental-webgl",e))}catch(e){return!1}}},textureCache:ut},A=(Object.defineProperty(t,"isWebGLInitialized",{enumerable:!0,configurable:!1,get:function(){return gt}}),t);function xt(e,t){var r,n;(n=e).voiLUT&&n.voiLUT.lut&&0<n.voiLUT.lut.length||void 0!==n.voi.windowWidth&&void 0!==n.voi.windowCenter||(r=(n=t.maxPixelValue*t.slope+t.intercept)-(t=t.minPixelValue*t.slope+t.intercept),n=(n+t)/2,void 0===e.voi?e.voi={windowWidth:r,windowCenter:n}:(e.voi.windowWidth=r,e.voi.windowCenter=n))}function Et(e,t){return!e&&!t||!(!e||!t)&&e.id===t.id}function It(e,t,r){var n,o,a,i,l,s;return r?(o=(n=r).lut[0],a=n.lut[n.lut.length-1],i=n.firstValueMapped+n.lut.length,function(e){return e<n.firstValueMapped?o:i<=e?a:n.lut[e]}):(l=e,s=t,function(e){return e*l+s})}function Tt(e){return function(e){if(Array.isArray(e))return Ct(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){var r;if(e)return"string"==typeof e?Ct(e,t):"Map"===(r="Object"===(r=Object.prototype.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:r)||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Ct(e,t):void 0}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ct(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Lt=function(e,t,r,n){var o,a,i,l,s,u,d,m;return r?(o=r,a=n,i=Math.max.apply(Math,Tt(o.lut)).toString(2).length-8,l=o.lut[0]>>i,s=o.lut[o.lut.length-1]>>i,u=o.firstValueMapped+o.lut.length-1,function(e){return e<o.firstValueMapped?l:u<=e?s:a?o.lut[Math.round(e)-o.firstValueMapped]>>i:o.lut[e-o.firstValueMapped]>>i}):(d=e,m=t,function(e){return 255*((e-m)/d+.5)})},Pt=function(e,t,r,n,o,a){var i=e.maxPixelValue,l=e.minPixelValue,s=Math.min(l,0),u=(void 0===e.cachedLut&&(d=i-s+1,e.cachedLut={},e.cachedLut.lutArray=new Uint8ClampedArray(d)),e.cachedLut.lutArray),d=Boolean(e.slope%1)||Boolean(e.intercept%1),m=It(e.slope,e.intercept,o),c=Lt(t,r,a,d);if(!0===n)for(var f=l;f<=i;f++)u[f+-s]=255-c(m(f));else for(var g=l;g<=i;g++)u[g+-s]=c(m(g));return u},St=function(e,t,r){return void 0!==e.cachedLut&&e.cachedLut.windowCenter===t.voi.windowCenter&&e.cachedLut.windowWidth===t.voi.windowWidth&&Et(e.cachedLut.modalityLUT,t.modalityLUT)&&Et(e.cachedLut.voiLUT,t.voiLUT)&&e.cachedLut.invert===t.invert&&!0!==r||(xt(t,e),Pt(e,t.voi.windowWidth,t.voi.windowCenter,t.invert,t.modalityLUT,t.voiLUT),e.cachedLut.windowWidth=t.voi.windowWidth,e.cachedLut.windowCenter=t.voi.windowCenter,e.cachedLut.invert=t.invert,e.cachedLut.voiLUT=t.voiLUT,e.cachedLut.modalityLUT=t.modalityLUT),e.cachedLut.lutArray},Rt=function(e,t){var r=e.renderingTools.lastRenderedImageId,n=e.renderingTools.lastRenderedViewport;return t.imageId!==r||!n||n.windowCenter!==e.viewport.voi.windowCenter||n.windowWidth!==e.viewport.voi.windowWidth||n.invert!==e.viewport.invert||n.rotation!==e.viewport.rotation||n.hflip!==e.viewport.hflip||n.vflip!==e.viewport.vflip||n.modalityLUT!==e.viewport.modalityLUT||n.voiLUT!==e.viewport.voiLUT||n.colormap!==e.viewport.colormap},_=function(e,t){var r=e.renderingTools.renderCanvas,n=(r.width=t.width,r.height=t.height,r.getContext("2d",{desynchronized:!0})),r=(n.fillStyle="white",n.fillRect(0,0,r.width,r.height),n.getImageData(0,0,t.width,t.height));e.renderingTools.renderCanvasContext=n,e.renderingTools.renderCanvasData=r},M=function(e){var t=e.image.imageId,r=e.viewport,n=e.image.color;return e.renderingTools.lastRenderedImageId=t,e.renderingTools.lastRenderedIsColor=n,e.renderingTools.lastRenderedViewport={windowCenter:r.voi.windowCenter,windowWidth:r.voi.windowWidth,invert:r.invert,rotation:r.rotation,hflip:r.hflip,vflip:r.vflip,modalityLUT:r.modalityLUT,voiLUT:r.voiLUT,colormap:r.colormap},e.renderingTools};function Dt(e,t,r,n){var o,a,n=!(3<arguments.length&&void 0!==n)||n,i=!0===e.renderingTools.lastRenderedIsColor,i=(e.renderingTools.renderCanvas&&!i||(e.renderingTools.renderCanvas=document.createElement("canvas"),_(e,t)),e.renderingTools.renderCanvas);return!1===Rt(e,t)&&!0!==r||(i.width===t.width&&i.height===t.height||_(e,t),o=I(),r=St(t,e.viewport,r),t.stats=t.stats||{},t.stats.lastLutGenerateTime=I()-o,a=e.renderingTools.renderCanvasData,e=e.renderingTools.renderCanvasContext,(n?Ye:Ke)(t,r,a.data),o=I(),e.putImageData(a,0,0),t.stats.lastPutImageDataTime=I()-o),i}function At(e,t){if(void 0===e)throw new Error("drawImage: enabledElement parameter must not be undefined");var r=e.image;if(void 0===r)throw new Error("drawImage: image must be loaded before it can be drawn");var n=e.canvas.getContext("2d",{desynchronized:!0}),t=(n.setTransform(1,0,0,1,0,0),n.fillStyle=Xe(e),n.fillRect(0,0,e.canvas.width,e.canvas.height),n.imageSmoothingEnabled=!e.viewport.pixelReplication,n.mozImageSmoothingEnabled=n.imageSmoothingEnabled,T(e,n),r=e.options&&e.options.renderer&&"webgl"===e.options.renderer.toLowerCase()?A.renderer.render(e):Dt(e,r,t),f(e.image,e.viewport)),o=t.tlhc.x-1,a=t.tlhc.y-1,i=t.brhc.x-o,t=t.brhc.y-a;n.drawImage(r,o,a,i,t,o,a,i,t),e.renderingTools=M(e)}function _t(e,t,r,n,o){var a,i=e.maxPixelValue,l=e.minPixelValue,s=Math.min(l,0),u=(void 0===e.cachedLut&&(a=i-s+1,e.cachedLut={},e.cachedLut.lutArray=new Uint8ClampedArray(a)),e.cachedLut.lutArray),d=Lt(t,r,o);if(!0===n)for(var m=l;m<=i;m++)u[m+-s]=255-d(m);else for(var c=l;c<=i;c++)u[c+-s]=d(c)}var Mt=function(e,t,r){var n=I(),o=e.getPixelData(),a=(e.stats.lastGetPixelDataTime=I()-n,e.minPixelValue),i=0,l=0,s=o.length,n=I();if(a<0)for(;l<s;)r[i++]=t[o[l++]+-a],r[i++]=t[o[l++]+-a],r[i]=t[o[l]+-a],l+=2,i+=2;else for(;l<s;)r[i++]=t[o[l++]],r[i++]=t[o[l++]],r[i]=t[o[l]],l+=2,i+=2;e.stats.lastStoredPixelDataToCanvasImageDataTime=I()-n},Ot=function(e,t,r){var n=I(),o=e.getPixelData(),a=(e.stats.lastGetPixelDataTime=I()-n,e.minPixelValue),i=0,l=0,s=o.length,n=I();if(a<0)for(;l<s;)r[i++]=t[o[l++]+-a],r[i++]=t[o[l++]+-a],r[i++]=t[o[l++]+-a],r[i++]=o[l++];else for(;l<s;)r[i++]=t[o[l++]],r[i++]=t[o[l++]],r[i++]=t[o[l++]],r[i++]=o[l++];e.stats.lastStoredPixelDataToCanvasImageDataTime=I()-n};function Nt(e,t,r){var n,o,a=!0===e.renderingTools.lastRenderedIsColor,a=(e.renderingTools.renderCanvas&&a||(e.renderingTools.renderCanvas=document.createElement("canvas")),e.renderingTools.renderCanvas);return(!t.rawType||t.rawType&&"IMAGE"!==t.rawType)&&255===e.viewport.voi.windowWidth&&128===e.viewport.voi.windowCenter&&!1===e.viewport.invert&&t.getCanvas&&t.getCanvas()?t.getCanvas():(!1===Rt(e,t)&&!0!==r||(a.width===t.width&&a.height===t.height||_(e,t),r=I(),o=t,n=e.viewport,void 0!==o.cachedLut&&o.cachedLut.windowCenter===n.voi.windowCenter&&o.cachedLut.windowWidth===n.voi.windowWidth&&o.cachedLut.invert===n.invert||(_t(o,n.voi.windowWidth,n.voi.windowCenter,n.invert),o.cachedLut.windowWidth=n.voi.windowWidth,o.cachedLut.windowCenter=n.voi.windowCenter,o.cachedLut.invert=n.invert),n=o.cachedLut.lutArray,t.stats=t.stats||{},t.stats.lastLutGenerateTime=I()-r,o=e.renderingTools.renderCanvasData,e=e.renderingTools.renderCanvasContext,(t.rgba?Ot:Mt)(t,n,o.data),r=I(),e.putImageData(o,0,0),t.stats.lastPutImageDataTime=I()-r),a)}function O(e,t){if(void 0===e)throw new Error("renderColorImage: enabledElement parameter must not be undefined");var r=e.image;if(void 0===r)throw new Error("renderColorImage: image must be loaded before it can be drawn");var n=e.canvas.getContext("2d",{desynchronized:!0}),t=(n.setTransform(1,0,0,1,0,0),n.fillStyle=Xe(e),n.fillRect(0,0,e.canvas.width,e.canvas.height),n.imageSmoothingEnabled=!e.viewport.pixelReplication,n.mozImageSmoothingEnabled=n.imageSmoothingEnabled,T(e,n),r=e.options&&e.options.renderer&&"webgl"===e.options.renderer.toLowerCase()?A.renderer.render(e):Nt(e,r,t),f(e.image,e.viewport)),o=t.tlhc.x-1,a=t.tlhc.y-1,i=t.brhc.x-o,t=t.brhc.y-a;n.drawImage(r,o,a,i,t,o,a,i,t),e.renderingTools=M(e)}var Vt=function(e,t,r,n){var o,a=I(),i=e.getPixelData(),l=(e.stats.lastGetPixelDataTime=I()-a,i.length),s=e.minPixelValue,u=0,d=0,a=I(),m=r instanceof w.LookupTable?r.Table:r;if(s<0)for(;d<l;)o=m[t[i[d++]+-s]],n[u++]=o[0],n[u++]=o[1],n[u++]=o[2],n[u++]=o[3];else for(;d<l;)o=m[t[i[d++]]],n[u++]=o[0],n[u++]=o[1],n[u++]=o[2],n[u++]=o[3];e.stats.lastStoredPixelDataToCanvasImageDataTime=I()-a};function Ut(e,t,r){e.renderingTools.renderCanvas||(e.renderingTools.renderCanvas=document.createElement("canvas"));var n,o,a=e.renderingTools.renderCanvas,i=e.viewport.colormap||e.options.colormap;if(e.options&&e.options.colormap&&console.warn("enabledElement.options.colormap is deprecated. Use enabledElement.viewport.colormap instead"),i=i&&"string"==typeof i?w.getColormap(i):i)return o=i.getId(),!1===Rt(e,t)&&!0!==r&&e.renderingTools.colormapId===o||(a.width===t.width&&a.height===t.height||_(e,t),n=I(),e.renderingTools.colorLut&&!r&&e.renderingTools.colormapId===o||(i.setNumberOfColors(256),e.renderingTools.colorLut=i.createLookupTable(),e.renderingTools.colormapId=o),i=St(t,e.viewport,r),t.stats=t.stats||{},t.stats.lastLutGenerateTime=I()-n,o=e.renderingTools.colorLut,r=e.renderingTools.renderCanvasData,e=e.renderingTools.renderCanvasContext,Vt(t,i,o,r.data),n=I(),e.putImageData(r,0,0),t.stats.lastPutImageDataTime=I()-n),a;throw new Error("renderPseudoColorImage: colormap not found.")}function Bt(e,t){if(void 0===e)throw new Error("drawImage: enabledElement parameter must not be undefined");var r=e.image;if(void 0===r)throw new Error("drawImage: image must be loaded before it can be drawn");var n=e.canvas.getContext("2d",{desynchronized:!0}),r=(n.setTransform(1,0,0,1,0,0),n.fillStyle=Xe(e),n.fillRect(0,0,e.canvas.width,e.canvas.height),n.imageSmoothingEnabled=!e.viewport.pixelReplication,n.mozImageSmoothingEnabled=n.imageSmoothingEnabled,T(e,n),Ut(e,r,t)),t=f(e.image,e.viewport),o=t.tlhc.x-1,a=t.tlhc.y-1,i=t.brhc.x-o,t=t.brhc.y-a;n.drawImage(r,o,a,i,t,o,a,i,t),e.renderingTools=M(e)}var kt=function(e,t,r){var n,o=I(),a=e.getPixelData(),i=(e.stats.lastGetPixelDataTime=I()-o,a.length),l=e.minPixelValue,s=0,u=0,o=I(),d=t instanceof w.LookupTable?t.Table:t;if(l<0)for(;u<i;)n=d[a[u++]+-l],r[s++]=n[0],r[s++]=n[1],r[s++]=n[2],r[s++]=n[3];else for(;u<i;)n=d[a[u++]],r[s++]=n[0],r[s++]=n[1],r[s++]=n[2],r[s++]=n[3];e.stats.lastStoredPixelDataToCanvasImageDataTime=I()-o};function Gt(e,t,r){e.renderingTools.renderCanvas||(e.renderingTools.renderCanvas=document.createElement("canvas"));var n,o,a=e.renderingTools.renderCanvas,i=e.viewport.colormap||e.options.colormap;if(e.options.colormap&&console.warn("enabledElement.options.colormap is deprecated. Use enabledElement.viewport.colormap instead"),i=i&&"string"==typeof i?w.getColormap(i):i)return o=i.getId(),!1===Rt(e,t)&&!0!==r&&e.renderingTools.colormapId===o||(a.width===t.width&&a.height===t.height||_(e,t),n=I(),e.renderingTools.colorLut&&!r&&e.renderingTools.colormapId===o||(e.renderingTools.colorLut=i.createLookupTable(),e.renderingTools.colormapId=o),t.stats=t.stats||{},t.stats.lastLutGenerateTime=I()-n,r=e.renderingTools.colorLut,i=e.renderingTools.renderCanvasData,o=e.renderingTools.renderCanvasContext,kt(t,r,i.data),n=I(),o.putImageData(i,0,0),t.stats.lastPutImageDataTime=I()-n),a;throw new Error("renderLabelMapImage: colormap not found.")}function Ft(e,t){if(void 0===e)throw new Error("renderLabelMapImage: enabledElement parameter must not be undefined");var r=e.image;if(void 0===r)throw new Error("renderLabelMapImage: image must be loaded before it can be drawn");var n=e.canvas.getContext("2d",{desynchronized:!0}),r=(n.setTransform(1,0,0,1,0,0),n.fillStyle=Xe(e),n.fillRect(0,0,e.canvas.width,e.canvas.height),n.imageSmoothingEnabled=!e.viewport.pixelReplication,n.mozImageSmoothingEnabled=n.imageSmoothingEnabled,T(e,n),Gt(e,r,t)),t=f(e.image,e.viewport),o=t.tlhc.x-1,a=t.tlhc.y-1,i=t.brhc.x-o,t=t.brhc.y-a;n.drawImage(r,o,a,i,t,o,a,i,t),e.renderingTools=M(e)}function zt(e){var t=e.syncProps||{};t.originalScale=e.viewport.scale,e.syncProps=t}function qt(e,n){e.forEach(function(e){var t,r;e!==n&&e.viewport&&n.viewport&&(e.syncProps||zt(e),r=e,(t=n).syncProps||zt(t),r.syncProps||zt(r),r=r.syncProps.originalScale/t.syncProps.originalScale,e.viewport.scale=n.viewport.scale*r,e.viewport.rotation=n.viewport.rotation,e.viewport.translation={x:n.viewport.translation.x/r,y:n.viewport.translation.y/r},e.viewport.hflip=n.viewport.hflip,e.viewport.vflip=n.viewport.vflip)})}function jt(s,e,u){e.forEach(function(e,t){if(e.image){s.save(),e.canvas=s.canvas,T(e,s);var r=e.viewport.colormap||e.options.colormap,n=e.viewport.labelmap,o=e.invalid||u;if(r&&""!==r&&!0===n){var n=e,a=o;if(void 0===n)throw new Error("addLabelMapLayer: layer parameter must not be undefined");var i=n.image;if(void 0===i)throw new Error("addLabelMapLayer: image must be loaded before it can be drawn");n.canvas=Gt(n,i,a),(i=n.canvas.getContext("2d",{desynchronized:!0})).imageSmoothingEnabled=!n.viewport.pixelReplication,i.mozImageSmoothingEnabled=i.imageSmoothingEnabled,n.renderingTools=M(n)}else if(r&&""!==r){a=e,i=o;if(void 0===a)throw new Error("addPseudoColorLayer: layer parameter must not be undefined");n=a.image;if(void 0===n)throw new Error("addPseudoColorLayer: image must be loaded before it can be drawn");a.canvas=Ut(a,n,i),(n=a.canvas.getContext("2d",{desynchronized:!0})).imageSmoothingEnabled=!a.viewport.pixelReplication,n.mozImageSmoothingEnabled=n.imageSmoothingEnabled,a.renderingTools=M(a)}else if(!0===e.image.color){r=e,n=o;if(void 0===r)throw new Error("addColorLayer: layer parameter must not be undefined");var l=r.image;if(void 0===l)throw new Error("addColorLayer: image must be loaded before it can be drawn");l.rgba=!0,r.canvas=Nt(r,l,n),(l=r.canvas.getContext("2d",{desynchronized:!0})).imageSmoothingEnabled=!r.viewport.pixelReplication,l.mozImageSmoothingEnabled=l.imageSmoothingEnabled,r.renderingTools=M(r)}else!function(e,t,r){if(r=2<arguments.length&&void 0!==r&&r,void 0===e)throw new Error("addGrayscaleLayer: layer parameter must not be undefined");var n=e.image;if(void 0===n)throw new Error("addGrayscaleLayer: image must be loaded before it can be drawn");e.canvas=Dt(e,n,t,r),(n=e.canvas.getContext("2d",{desynchronized:!0})).imageSmoothingEnabled=!e.viewport.pixelReplication,n.mozImageSmoothingEnabled=n.imageSmoothingEnabled,e.renderingTools=M(e)}(e,o,0===t);e.options&&e.options.opacity?s.globalAlpha=e.options.opacity:s.globalAlpha=1,e.options&&e.options.fillStyle&&(s.fillStyle=e.options.fillStyle),s.imageSmoothingEnabled=!e.viewport.pixelReplication,s.mozImageSmoothingEnabled=s.imageSmoothingEnabled;n=f(e.image,e.viewport),l=n.tlhc.x-1,r=n.tlhc.y-1,o=n.brhc.x-l,t=n.brhc.y-r;s.drawImage(e.canvas,l,r,o,t,l,r,o,t),s.restore(),e.invalid=!1}})}function Wt(e,t){var r,n=e.image,o=e.element,a=e.layers||[];e.canvas&&e.image&&(r=I(),n.stats={lastGetPixelDataTime:-1,lastStoredPixelDataToCanvasImageDataTime:-1,lastPutImageDataTime:-1,lastRenderTime:-1,lastLutGenerateTime:-1},a&&a.length?Ht(e,t):n&&(n.render||(e.viewport.colormap&&""!==e.viewport.colormap&&!0===e.image.labelmap?Ft:e.viewport.colormap&&""!==e.viewport.colormap?Bt:n.color?O:At))(e,t),a=I()-r,t={viewport:e.viewport,element:o,image:n,enabledElement:e,canvasContext:e.canvas.getContext("2d",{desynchronized:!0}),renderTimeInMs:a},n.stats.lastRenderTime=a,e.invalid=!1,e.needsRedraw=!1,g(o,d.IMAGE_RENDERED,t))}var Ht=function(e,t){var r=e.element,n=$(r),o=h(r),r=J(r),a=!e.lastSyncViewportsState&&e.syncViewports,a=(e.lastSyncViewportsState=e.syncViewports,a&&n.forEach(function(e){e.viewport&&zt(e)}),!0===e.syncViewports&&qt(r,o),e.canvas.getContext("2d",{desynchronized:!0}));a.setTransform(1,0,0,1,0,0),a.fillStyle="black",a.fillRect(0,0,e.canvas.width,e.canvas.height),jt(a,r,t)};function Xt(e){A.renderer.isWebGLAvailable()?(A.renderer.initRenderer(),e.renderer="webgl",e.desynchronized=!0,e.preserveDrawingBuffer=!0):(console.error("WebGL not available, falling back to Canvas renderer"),delete e.renderer,delete e.preserveDrawingBuffer)}var Yt=function(e){return window.requestAnimationFrame(e)||window.webkitRequestAnimationFrame(e)||window.mozRequestAnimationFrame(e)||window.oRequestAnimationFrame(e)||window.msRequestAnimationFrame(e)||void window.setTimeout(e,1e3/60)},Kt="cornerstone-canvas";function Zt(e){var t="canvas.".concat(Kt);return e.querySelector(t)||(t=e,(e=document.createElement("canvas")).style.display="block",e.classList.add(Kt),t.appendChild(e),e)}var $t=function(e,t){if(void 0===e)throw new Error("enable: parameter element cannot be undefined");t&&t.renderer&&"webgl"===t.renderer.toLowerCase()&&Xt(t);var r,n={element:e,canvas:Zt(e),image:void 0,invalid:!1,needsRedraw:!0,options:Object.assign({},t),layers:[],data:{},renderingTools:{},uuid:(r=(new Date).getTime(),"undefined"!=typeof performance&&"function"==typeof performance.now&&(r+=performance.now()),"x.x.x.x.x.x.xxxx.xxx.x.x.xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=(r+16*Math.random())%16|0;return r=Math.floor(r/16),("x"===e?t:3&t|8).toString(16)}))};B(n),g(a,d.ELEMENT_ENABLED,n),He(e,!0),function e(t){void 0!==n.canvas&&(g(n.element,d.PRE_RENDER,{enabledElement:n,timestamp:t}),n.needsRedraw&&(void 0!==(t=n).image||0<t.layers.length)&&Wt(n,n.invalid),Yt(e))}()},Jt=function(e,t){e=c(e);return s(e.canvas,t)},Qt=function(e){return c(e).image},e5=function(e,t,r,n,o){if(void 0===e)throw new Error("getStoredPixels: parameter element must not be undefined");t=Math.round(t),r=Math.round(r);for(var a=c(e),i=[],l=0,s=a.image.getPixelData(),u=0;u<o;u++)for(var d=0;d<n;d++){var m=(u+r)*a.image.columns+(d+t);i[l++]=s[m]}return i},t5=function(e,t,r,n,o){t=e5(e,t,r,n,o),r=c(e),n=It(r.image.slope,r.image.intercept,r.viewport.modalityLUT);return t.map(n)},r5=function(e){e=c(e).viewport;if(void 0!==e)return Object.assign({},e)},n5={drawImage:n,generateLut:Pt,getDefaultViewport:s,requestAnimationFrame:Yt,setDefaultViewport:q,storedPixelDataToCanvasImageData:Ye,storedPixelDataToCanvasImageDataRGBA:Ke,storedPixelDataToCanvasImageDataColorLUT:kt,storedPixelDataToCanvasImageDataPseudocolorLUT:Vt,storedColorPixelDataToCanvasImageData:Mt,getTransform:Ue,calculateTransform:ke,Transform:Be},o5=function(e){var t=c(e);t.invalid=!0,t.needsRedraw=!0,g(e,d.INVALIDATED,{element:e})},a5=function(e){k(e).forEach(function(e){n(e,!0)})},N=[];var i5={addProvider:function(e){for(var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,r=0;r<N.length&&!(N[r].priority<=t);r++);N.splice(r,0,{priority:t,provider:e})},removeProvider:function(e){for(var t=0;t<N.length;t++)if(N[t].provider===e){N.splice(t,1);break}},get:function(e,t){for(var r=0;r<N.length;r++){var n=N[r].provider(e,t);if(void 0!==n)return n}}},l5=function(e,t,r){var n=c(e);if(void 0===n.image)throw new Error("image has not been loaded yet");e=e.getBoundingClientRect(),t={x:t-e.left-window.pageXOffset,y:r-e.top-window.pageYOffset},r=Ue(n);return r.invert(),r.transformPoint(t.x,t.y)},s5=function(e,t){e=c(e);return Ue(e).transformPoint(t.x,t.y)};var u5=function(e,t){var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null,n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;if(void 0===e)throw new Error("renderToCanvas: parameter canvas cannot be undefined");n&&n.renderer&&"webgl"===n.renderer.toLowerCase()&&Xt(n);var o=s(e,t),e=(r&&Object.assign(o,r),{element:r=e,canvas:r,image:t,invalid:!0,needsRedraw:!0,options:n,layers:[],data:{},renderingTools:{},viewport:o}),r={enabledElement:e,timestamp:Date.now()};g(e.element,d.PRE_RENDER,r),Wt(e,e.invalid)};function d5(e,t){if(void 0===e)throw new Error("renderWebImage: enabledElement parameter must not be undefined");var r,n,o,a,i,l=e.image;if(void 0===l)throw new Error("renderWebImage: image must be loaded before it can be drawn");(!l.rawType||"IMAGE"!==l.rawType)&&e.viewport.voi.windowWidth===e.image.windowWidth&&e.viewport.voi.windowCenter===e.image.windowCenter&&!1===e.viewport.invert?((r=e.canvas.getContext("2d",{desynchronized:!0})).setTransform(1,0,0,1,0,0),r.fillStyle="black",r.fillRect(0,0,e.canvas.width,e.canvas.height),r.imageSmoothingEnabled=!e.viewport.pixelReplication,r.mozImageSmoothingEnabled=r.imageSmoothingEnabled,T(e,r),n=(i=f(e.image,e.viewport)).tlhc.x-1,o=i.tlhc.y-1,a=i.brhc.x-n,i=i.brhc.y-o,r.drawImage(l.getImage(),n,o,a,i,n,o,a,i)):O(e,t)}var m5={colorImage:O,grayscaleImage:At,webImage:d5,pseudoColorImage:Bt,labelMapImage:Ft,toCanvas:u5},c5=function(e){var t=c(e);t.viewport=s(t.canvas,t.image),m(e)},f5=function(e,t){var r=c(e);if(void 0===r.viewport&&(r.viewport=s(r.canvas)),t)for(var n in t)null!==t[n]&&(r.viewport[n]=t[n]);r.viewport.voi.windowWidth&&(r.viewport.voi.windowWidth=Math.max(r.viewport.voi.windowWidth,1e-6)),r.viewport.scale&&(r.viewport.scale=Math.max(r.viewport.scale,1e-4)),r.viewport.rotation%=360,r.viewport.rotation<0&&(r.viewport.rotation+=360),r.image&&m(e)};e.default={drawImage:n,generateLut:Pt,getDefaultViewport:s,requestAnimationFrame:Yt,storedPixelDataToCanvasImageData:Ye,storedColorPixelDataToCanvasImageData:Mt,storedPixelDataToCanvasImageDataColorLUT:kt,storedPixelDataToCanvasImageDataPseudocolorLUT:Vt,internal:n5,renderLabelMapImage:Ft,renderPseudoColorImage:Bt,renderColorImage:O,renderGrayscaleImage:At,renderWebImage:d5,renderToCanvas:u5,canvasToPixel:Ge,disable:Fe,displayImage:ze,draw:qe,drawInvalidated:je,enable:$t,getElementData:me,removeElementData:ce,getEnabledElement:c,addEnabledElement:B,getEnabledElementsByImageId:k,getEnabledElements:G,addLayer:Y,removeLayer:K,getLayer:Z,getLayers:$,getVisibleLayers:J,setActiveLayer:u,getActiveLayer:h,purgeLayers:ee,setLayerImage:Q,fitToWindow:We,getDefaultViewportForImage:Jt,getDisplayedArea:f,setDefaultViewport:q,getImage:Qt,getPixels:t5,getStoredPixels:e5,getViewport:r5,loadImage:Ie,loadAndCacheImage:Te,registerImageLoader:Ce,registerUnknownImageLoader:Le,invalidate:o5,invalidateImageId:a5,pageToPixel:l5,pixelToCanvas:s5,reset:c5,resize:He,setToPixelCoordinateSystem:T,setViewport:f5,updateImage:m,pixelDataToFalseColorData:le,rendering:m5,imageCache:ye,metaData:i5,webGL:A,colors:w,convertImageToFalseColorImage:ue,convertToFalseColorImage:de,restoreImage:se,EVENTS:d,events:a,triggerEvent:g,imageLoadPoolManager:Me,imageRetrievalPoolManager:Oe,RequestPoolManager:_e}}],n={},o.m=r,o.c=n,o.d=function(e,t,r){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(o.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)o.d(r,n,function(e){return t[e]}.bind(null,n));return r},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="",o(o.s=0);function o(e){var t;return(n[e]||(t=n[e]={i:e,l:!1,exports:{}},r[e].call(t.exports,t,t.exports,o),t.l=!0,t)).exports}var r,n});
//# sourceMappingURL=cornerstone.min.js.map